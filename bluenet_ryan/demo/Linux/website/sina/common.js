//<script type="text/javascript" src="jsloader.js"/*tpa=http://news.sina.com.cn/js/268/index2015/jsloader.js*/></script> //以下为jsloader加载器组件
(function(win){var doc=document,version="1.1.1",callbackData={},length=0,cbkLen=0;if(win.jsLoader){if(win.jsLoader.version>=version){return}callbackData=win.jsLoader.getData();length=callbackData.length}function emptyFn(){}function copy(opts,deep){var newObj={},hasOwn,tmp;for(var p in opts){hasOwn=opts.hasOwnProperty(p);tmp=opts[p];if(hasOwn){if(!deep||"object"!==typeof(tmp)){newObj[p]=tmp}else{newObj[p]=copy(tmp)}}}return newObj}function getScript(url,callback,charset){var script=doc.createElement("script");script.type="text/javascript";if(charset){script.charset=charset}script.onreadystatechange=script.onload=function(){if(!this.readyState||this.readyState=="loaded"||this.readyState=="complete"){if(callback){callback()}script.onreadystatechange=script.onload=null;script.parentNode.removeChild(script)}};script.src=url;var h=doc.getElementsByTagName("head")[0];h.insertBefore(script,h.firstChild)}var JsObj=function(name,url){this.name=name;this.url=url;this.callback=[]};JsObj.prototype={status:"init",onload:function(){this.status="ok";var errors=[];if(this.url.indexOf("common.js"/*tpa=https://n.sinaimg.cn/news/components/common.js*/)){}for(var i=0;i<this.callback.length;i++){if(typeof this.callback[i]=="function"){try{this.callback[i]()}catch(e){errors.push(e.toString())}}}this.callback=[];if(errors.length!=0){throw new Error(errors)}}};var jsLoader=function(opts,fn){var cfg={};var args=arguments;if(args.length==3){cfg.name=args[0];cfg.url=args[1];cfg.callback=args[2]}else{if(typeof opts==="string"){cfg.url=opts;if(typeof fn==="function"){cfg.callback=fn}}else{cfg=copy(opts,!0);if(!cfg.callback&&"function"===typeof(fn)){cfg.callback=fn}}}var url=cfg.url||"",name=cfg.name||"",callback=cfg.callback||emptyFn,charset=cfg.charset||"";var chain={name:name,jsLoader:function(opts,fn){var args=arguments;var cfg={};if(args.length==3){cfg.name=args[0];cfg.url=args[1];cfg.callback=args[2]}else{if(typeof opts==="string"){cfg.url=opts;if(typeof fn==="function"){cfg.callback=fn}}else{cfg=copy(opts,!0);if(!cfg.callback&&"function"===typeof(fn)){cfg.callback=fn}}}if(!cfg.name){cfg.name="noname"+length;length++}var c=jsLoader({name:this.name,callback:function(){jsLoader(cfg)}});c.name=cfg.name;return c}};if(name){if(!callbackData[name]){if(!url){callbackData[name]=new JsObj(name);callbackData[name].status="waiting"}else{callbackData[name]=new JsObj(name,url)}length++}else{if(callbackData[name].status=="waiting"&&url){callbackData[name].status="init     "}}if(cfg.status){callbackData[name].status=cfg.status}if(callbackData[name].status=="loading"||callbackData[name].status=="waiting"){if(typeof callback=="function"){callbackData[name].callback.push(callback)}return chain}else{if(callbackData[name].status=="ok"){if(typeof callback=="function"){callback()}return chain}}}else{if(!url){return chain}for(var item in callbackData){if(callbackData[item].url==url){name=item;break}}if(!name){name="noname"+length;callbackData[name]=new JsObj(name,url);length++}chain.name=name;if(callbackData[name].status=="loading"){if(typeof callback=="function"){callbackData[name].callback.push(callback)}return chain}else{if(callbackData[name].status=="ok"){if(typeof callback=="function"){callback()}return chain}}}if(typeof callback=="function"){callbackData[name].callback.push(callback)}getScript(url,function(){callbackData[name].onload()},charset);callbackData[name].status="loading";return chain};win.jsLoader=jsLoader;win.jsLoader.version=version;win.jsLoader.getData=function(){return callbackData}})(window);
//<script src="sima.js"/*tpa=https://news.sina.com.cn/js/pctianyi/sima.js*/></script> //以下为sima组件
(function(){var n="SINAGLOBAL",e,t="https:"==window.location.protocol?"https://":"http://",o="https:"==window.location.protocol?"sbeacon.sina.com.cn"/*tpa=https://n.sinaimg.cn/news/components/sbeacon.sina.com.cn*/:"beacon.sina.com-1.cn"/*tpa=https://n.sinaimg.cn/news/components/beacon.sina.com.cn*/,r=window.location.href.match(/\w+\.sina\.com\.cn/)||"",a,c="",u,s,f,d,w;if(window.SIMA){return}e=O(n);a=r?"pc_"+r[0].split(".")[0]:"",u=JSON.stringify||l;function l(n){var e="",t;if(n===null){return String(n)}switch(typeof n){case"number":case"boolean":return String(n);case"string":return'"'+n+'"';case"undefined":case"function":return undefined}switch(Object.prototype.toString.call(n)){case"[object Array]":e+="[";for(var o=0,i=n.length-1;o<i;o++){t=l(n[o]);e+=(t===undefined?null:t)+","}e+=l(n[o]);e+="]";return e;case"[object Date]":return'"'+(n.toJSON?n.toJSON():n.toString())+'"';case"[object RegExp]":return"{}";case"[object Object]":e+="{";for(var o in n){if(n.hasOwnProperty(o)){t=l(n[o]);if(t!==undefined){e+='"'+o+'":'+t+","}}}e=e.slice(0,-1);e+="}";return e}}function p(n,e){var t=0;t=n.indexOf("#");if(t>0){if(e)c=n.substring(t);return n.substring(0,t)}else{if(e)c="";return n}}function m(n){var e=0;e=n.indexOf("#");if(e>0){if(changeHash)c=n.substring(e);return n.substring(0,e)}else{if(changeHash)c="";return n}}function g(n){var e=document.cookie.indexOf(n+"=");if(-1==e){return""}e=document.cookie.indexOf("=",e)+1;var t=document.cookie.indexOf(";",e);if(0>=t){t=document.cookie.length}ckValue=document.cookie.substring(e,t);return ckValue}function h(){var n=window.navigator.userAgent.toLowerCase();return{os:/mac/.test(n)?"mac":"pc",ua:n}}function b(n){var e="";if(window.sinaSSOController&&window.sinaSSOController.getSinaCookie()&&window.sinaSSOController.getSinaCookie().uid){e=window.sinaSSOController.getSinaCookie().uid}else{e="unknown"}return e}function v(){var n=(new Date).getTime();var e=Math.random();return""+n+"_"+e}function S(n){var e=new Image;e.src=n}function k(){return""}function O(){var e,t;e=g(n)||"";return e}function m(n){for(i in n){if(typeof n[i]=="string"){n[i]=n[i].replace(/(\r\n)|(\n)|(\t)|(\<)|(\>)/gim,"")}}return n}window.SIMA=function(n){if(!n||!n.action||!n.data){return false}var t="https:"==window.location.protocol?"https://":"http://";var o="https:"==window.location.protocol?"sbeacon.sina.com.cn"/*tpa=https://n.sinaimg.cn/news/components/sbeacon.sina.com.cn*/:"beacon.sina.com-1.cn"/*tpa=https://n.sinaimg.cn/news/components/beacon.sina.com.cn*/;var i=t+o+"/mrt.gif?";var r=h(),c=r.os,s=r.ua,f=v(),d=k(),w=b();if(!n.pk){if(n.data.cre||n.data.mod){n.pk="187522"}else{n.pk="187523"}}n.data.subp=g("SUBP");var l={_pk:n.pk,_uk:n.uk,_src:"web",_rk:f,_v:"1.0",_cp:{os:c,ua:s,device_id:e,uid:w,accesstype:d},_ep:[{attribute:m(n.data),channel:a,ek:n.action||"",ref:encodeURIComponent(p(window.document.referrer.indexOf("baidu")==-1?window.document.referrer:"baidu.com"/*tpa=https://n.sinaimg.cn/news/components/baidu.com*/))||"",et:"custom",src:n.src||encodeURIComponent(p(window.location.href))||"",method:n.action,timestamp:(new Date).getTime()}]};S(i+u(l))}})();