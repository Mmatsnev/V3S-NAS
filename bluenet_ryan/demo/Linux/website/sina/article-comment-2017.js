!function(exports,undefined){var C={U:"undefined"},doc=document,byId=function(e){return"string"==typeof e?doc.getElementById(e):e},byTag=function(e){return"string"==typeof e?doc.getElementsByTagName(e):e},byAttr=function(e,t,n){"string"==typeof e&&(e=byId(e));for(var a,i=[],o=e.childNodes,s=Array.prototype.slice.call(arguments),r=2===s.length,c=0,l=o.length;c<l;c++)1===(a=o[c]).nodeType&&((r?null!=a.getAttribute(t):a.getAttribute(t)===n)&&i.push(a),0<a.childNodes.length&&(i=i.concat(byAttr.apply(null,[a].concat(s.slice(1))))));return i},hasClass=function(e,t){return!!e&&e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass=function(e,t){hasClass(e,t)||(e.className=e.className.replace(/(^\s*)|(\s*$)/g,"")+" "+t)},removeClass=function(e,t){if(hasClass(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}},toggleClass=function(e,t){hasClass(e,t)?removeClass(e,t):addClass(e,t)},preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation=function(e){return e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0,!1},contains=function(e,t){try{return e.contains?e!=t&&e.contains(t):!!(16&e.compareDocumentPosition(t))}catch(e){}},create=function(e){return"TEXT"==(e=e.toUpperCase())?doc.createTextNode(""):"BUFFER"==e?doc.createDocumentFragment():doc.createElement(e)},insertAfter=function(e,t){var n=t.parentNode;n.lastChild==t?n.appendChild(e):n.insertBefore(e,t.nextSibling)},ua=(P=navigator.userAgent.toLowerCase(),Q={},Q.isIE=/msie/.test(P),Q.isOPERA=/opera/.test(P),Q.isMOZ=/gecko/.test(P),Q.isIE6=/msie 6/.test(P),Q.isIE7=/msie 7/.test(P),Q.isSAFARI=/safari/.test(P),Q.iswinXP=/windows nt 5.1/.test(P),Q.iswinVista=/windows nt 6.0/.test(P),Q.isFF=/firefox/.test(P),Q.isIOS=/\((iPhone|iPad|iPod)/i.test(P),Q),P,Q,domReady=(R=[],S=0,T=0,function(e){S||(S=1,"complete"===doc.readyState?V():doc.addEventListener?(doc.addEventListener("DOMContentLoaded",function(){doc.removeEventListener("DOMContentLoaded",arguments.callee,!1),V()},!1),window.addEventListener("load",function(){window.removeEventListener("load",arguments.callee,!1),V()},!1)):(doc.attachEvent("onreadystatechange",function(){"complete"==doc.readyState&&(doc.detachEvent("onreadystatechange",arguments.callee),V())}),function(){if(!T){var e=new Image;try{e.doScroll(),e=null}catch(e){return setTimeout(arguments.callee,64)}V()}}())),"complete"===doc.readyState||T?e.call():R.push(e)}),R,S,T;function V(e){if(!T){if(T=1,R)for(;R.length;)R.shift()();R=null}}var timeoutHandle=(aa=[],ba={success:function(e){var t=aa[e];t&&(t.isSuccess=!0,clearTimeout(t.timer))},timeout:function(e,t){var n=aa[e];n&&(n.timer=setTimeout(function(){n.isSuccess||"function"==typeof t&&t.call(this)},n.time))}},function(e,t,n){if(aa[e])throw new Error(e+"已经被占用");aa[e]={},aa[e].time=n||5e3,aa[e].isSuccess=!1,"function"==typeof t&&t.call(this,ba)}),aa,ba,cssSupports=(ka=document.createElement("div"),la="Khtml O Moz Webkit".split(" "),ma=la.length,function(e){if(e in ka.style)return!0;if("-ms-"+e in ka.style)return!0;for(e=e.replace(/^[a-z]/,function(e){return e.toUpperCase()});ma--;)if(la[ma]+e in ka.style)return!0;return!1}),ka,la,ma,getXY=(pa=function(e){if((null==e.parentNode||null==e.offsetParent||"none"==getStyle(e,"display"))&&e!=doc.body)return[0,0];var t;t=e.getBoundingClientRect();var n=getScrollPos(e.ownerDocument);return[t.left+n[1],t.top+n[0]]},ua.isIE||(pa=function(e){if((null==e.parentNode||null==e.offsetParent||"none"==getStyle(e,"display"))&&e!=doc.body)return!1;var t=null,n=[],a=ua.isSAFARI;n=[e.offsetLeft,e.offsetTop],t=e.offsetParent;var i="absolute"==getStyle(e,"position");if(t!=e)for(;t;)n[0]+=t.offsetLeft+parseInt($.getStyle(t,"borderLeftWidth"),10),n[1]+=t.offsetTop+parseInt($.getStyle(t,"borderTopWidth"),10),a&&!i&&"absolute"==getStyle(t,"position")&&(i=!0),t=t.offsetParent;for(a&&i&&(n[0]-=e.ownerDocument.body.offsetLeft,n[1]-=e.ownerDocument.body.offsetTop),t=e.parentNode;t.tagName&&!/^body|html$/i.test(t.tagName);)getStyle(t,"display").search(/^inline|table-row.*$/i)&&(n[0]-=t.scrollLeft,n[1]-=t.scrollTop),t=t.parentNode;return n}),pa),pa,getScrollPos=function(){var e=doc.documentElement,t=doc.body;return[Math.max(e.scrollTop,t.scrollTop),Math.max(e.scrollLeft,t.scrollLeft),Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.scrollHeight,t.scrollHeight)]},getPosition=function(e){if(!e)return{left:0,top:0};var t=0,n=0;if("getBoundingClientRect"in document.documentElement){var a=e.getBoundingClientRect(),i=e.ownerDocument,o=i.body,s=i.documentElement,r=s.clientTop||o.clientTop||0,c=s.clientLeft||o.clientLeft||0;t=a.top+(exports.pageYOffset||s&&s.scrollTop||o.scrollTop)-r,n=a.left+(exports.pageXOffset||s&&s.scrollLeft||o.scrollLeft)-c}else for(;t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent;);return{left:n,top:t}},getStyle=function(e,t){if("getComputedStyle"in window)return getComputedStyle(e,null)[t];t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()});var n=e.currentStyle[t];if("auto"!==n&&"100%"!=n||"width"!==t&&"height"!==t)return n;var a=e.getBoundingClientRect();return"width"===t?a.right-a.left+"px":a.bottom-a.top+"px"},getOuterStyle=function(e,t){function n(e,t){var n=getStyle(e,t),a={thin:["1","2"],medium:["3","4"],thick:["5","6"]};return/^(border).+(Width)$/.test(t)&&a[n]&&(n=window.XDomainRequest?a[n][0]:a[n][1]),parseInt(n.replace("px",""),10)}return"width"===t?n(e,t)+n(e,"paddingLeft")+n(e,"paddingRight")+n(e,"borderLeftWidth")+n(e,"borderRightWidth"):n(e,t)+n(e,"paddingTop")+n(e,"paddingBottom")+n(e,"borderTopWidth")+n(e,"borderBottomWidth")},setStyle=function(e,t){if(e)for(var n in t)e.style[n]=t[n]},trim=function(e){return e.replace(/(^\s+)|(\s+$)/g,"")},encodeHTML=function(e){return"string"!=typeof e?e:0===e.length?"":e.replace(/&/g,"&gt;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\'/g,"'").replace(/\"/g,"&quot;").replace(/\n/g,"<br>")},decodeHTML=function(e){return"string"!=typeof e?e:0===e.length?"":e.replace(/&gt;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/'/g,"'").replace(/&quot;/g,'"').replace(/<br>/g,"\n")},encodeDoubleByte=function(e){return"string"!=typeof e?e:encodeURIComponent(e)},byteLength=function(e){if(typeof e==C.U)return 0;var t=e.match(/[^\x00-\x80]/g);return e.length+(t?t.length:0)},strLeft=function(e,t){var n=e.slice(0,t),a=n.replace(/[^\x00-\xff]/g,"**").length,i=e.length,o=n.length;if(a<t)return n;if(a==t)return t==i||o==i?n:e.slice(0,t-2)+"...";switch(a-=n.length){case 0:return n;case t:return t==i?e.slice(0,(t>>1)-1)+"...":e.slice(0,t>>1);default:var s=t-a,r=e.slice(s,t);return(i=r.replace(/[\x00-\xff]/g,"").length)?e.slice(0,s)+arguments.callee(r,i):e.slice(0,s)}},indexOf=function(e,t){if(t.indexOf)return t.indexOf(e);for(var n=0,a=t.length;n<a;){if(t[n]===e)return n;n++}return-1},inArray=function(e,t){return-1<indexOf(e,t)},isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},isEmptyObj=function(e){var t=!0;for(var n in e)if(e.hasOwnProperty(n)){t=!1;break}return t},isFn=function(e){return"function"==typeof e},extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},jsonToQuery=function(e,t){var n=[];if("object"==typeof e)for(var a in e)if(e[a]instanceof Array)for(var i=0,o=e[a].length;i<o;i++)n.push(a+"="+Fb(e[a][i],t));else"function"!=typeof e[a]&&n.push(a+"="+Fb(e[a],t));return n.length?n.join("&"):""};function Fb(e,t){return e=trim((e=null==e?"":e).toString()),t?encodeURIComponent(e):e}var queryToJson=function(e,t){function n(e){return t?decodeURIComponent(e):e}for(var a,i,o,s=trim(e).split("&"),r={},c=0,l=s.length;c<l;c++)s[c]&&(o=(a=s[c].split("="))[0],i=a[1],a.length<2&&(i=o,o="$nullName"),r[o]?(!0!==isArray(r[o])&&(r[o]=[r[o]]),r[o].push(n(i))):r[o]=n(i));return r},addEvent=function(e,t,n,a){var i=byId(e);if(null==i)throw new Error("addEvent 找不到对象："+e);return typeof a==C.U&&(a=!1),typeof t==C.U&&(t="click"),i.addEventListener?(i.addEventListener(t,n,a),!0):i.attachEvent?(i.attachEvent("on"+t,n),!0):void(i["on"+t]=n)},removeEvent=function(e,t,n){var a=byId(e);if(null==a)throw"removeEvent 找不到对象："+e;"function"==typeof n&&(typeof t==C.U&&(t="click"),a.addEventListener?a.removeEventListener(t,n,!1):a.attachEvent&&a.detachEvent("on"+t,n),n[t]=null)},fixEvent=function(e){return typeof e==C.U&&(e=window.event),e.target||(e.target=e.srcElement,e.pageX=e.x,e.pageY=e.y),typeof e.layerX==C.U&&(e.layerX=e.offsetX),typeof e.layerY==C.U&&(e.layerY=e.offsetY),e},byClass="function"==typeof document.getElementsByClassName?function(e,t){return t?t.getElementsByClassName(e):document.getElementsByClassName(e)}:function(e,t){for(var n=-1,a=[],i=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)"),o=t&&t.getElementsByTagName&&t.getElementsByTagName("*")||document.all||document.getElementsByTagName("*"),s=o.length;++n<s;i.test(o[n].className)&&a.push(o[n]));return o=null,a},builder=function(e,t){for(var n,a,i=byAttr(e,t),o={},s={},r=0,c=i.length;r<c;r++)null!=(a=(n=i[r]).getAttribute(t))&&(o[a]===undefined&&(o[a]=[]),o[a].push(n),s[a]===undefined&&(s[a]=n));return{box:s.wrap=e,list:o,ids:s}},custEvent=(Ac="__custEventKey__",Bc=1,Cc={},{define:function(e,t){if(e&&t){var n="number"==typeof e?e:e[Ac]||(e[Ac]=Bc++),a=Cc[n]||(Cc[n]={});t=[].concat(t);for(var i=0;i<t.length;i++)a[t[i]]||(a[t[i]]=[]);return n}},undefine:function(e,t){if(e){var n="number"==typeof e?e:e[Ac];n&&Cc[n]&&("string"==typeof t?t in Cc[n]&&delete Cc[n][t]:delete Cc[n])}},add:function(e,t,n,a){if(e&&"string"==typeof t&&n){var i=Dc(e,t);if(!i||!i.obj)throw"custEvent ("+t+") is undefined !";return i.obj.push({fn:n,data:a}),i.key}},remove:function(e,t,n){if(e){var a,i,o=Dc(e,t);if(o&&(a=o.obj)){if(isArray(a))if(n)for(i=0;i<a.length;i++)a[i].fn===n&&a.splice(i,1);else a.splice(0);else for(i in a)a[i]=[];return o.key}}},fire:function(e,t,n){if(e&&"string"==typeof t){var a,i=Dc(e,t);if(i&&(a=i.obj)){isArray(n)||(n=n!==undefined?[n]:[]);for(var o=0;o<a.length;o++){var s=a[o].fn;s&&s.apply&&s.apply($,[{type:t,data:a[o].data}].concat(n))}return i.key}}},destroy:function(){Cc={},Bc=1}}),Ac,Bc,Cc;function Dc(e,t){var n="number"==typeof e?e:e[Ac];return n&&Cc[n]&&{obj:"string"==typeof t?Cc[n][t]:Cc[n],key:n}}var delegatedEvent=function(o,s,r){s||(s=[]),isArray(s)&&(s=[s]);var c={};function a(e){var t=e||window.event,n=t.target||t.srcElement,a=e.type;if(function(e,t){for(var n=0,a=e.length;n<a;n+=1)if(contains(e[n],t))return!0;return!1}(s,n))return!1;if(!contains(o,n))return!1;for(var i=null;n&&n!==o&&n.getAttribute&&(i=n.getAttribute(r),!1!==(!c[a]||!c[a][i]||c[a][i]({evt:t,el:n,e:e,data:queryToJson(n.getAttribute("action-data")||"")})));)n=n.parentNode}r=r||"action-type";var e={add:function(e,t,n){c[t]||(c[t]={},addEvent(o,t,a)),c[t][e]=n},remove:function(e,t){c[t]&&(delete c[t][e],function(e){for(var t in e)return!1;return!0}(c[t])&&(delete c[t],removeEvent(o,t,a)))},pushExcept:function(e){s.push(e)},removeExcept:function(e){if(e)for(var t=0,n=s.length;t<n;t+=1)s[t]===e&&s.splice(t,1);else s=[]},clearExcept:function(e){s=[]},destroy:function(){for(var e in c){for(var t in c[e])delete c[e][t];delete c[e],removeEvent(o,a,e)}}};return e},bind2=(Function.prototype.bind2=function(e){var t=this;return function(){return t.apply(e,arguments)}},function(e,t){var n=e;return function(){return n.apply(t,arguments)}}),parseParam=function(e,t){var n;try{if(typeof t!=C.U)for(n in e)null!=t[n]&&(e[n]=t[n])}finally{return n=null,e}},Url=((Url=function(e){e=e||"",this.url=e,this.query={},this.parse()}).prototype={parse:function(e){e&&(this.url=e),this.parseAnchor(),this.parseParam()},parseAnchor:function(){var e=this.url.match(/\#(.*)/);e=e?e[1]:null,null!=(this._anchor=e)&&(this.anchor=this.getNameValuePair(e),this.url=this.url.replace(/\#.*/,""))},parseParam:function(){var e=this.url.match(/\?([^\?]*)/);null!=(e=e?e[1]:null)&&(this.url=this.url.replace(/\?([^\?]*)/,""),this.query=this.getNameValuePair(e))},getNameValuePair:function(e){var a={};return e.replace(/([^&=]*)(?:\=([^&]*))?/gim,function(e,t,n){""!==t&&(a[t]=n||"")}),a},getParam:function(e){return this.query[e]||""},clearParam:function(){this.query={}},setParam:function(e,t){if(null==e||""===e||"string"!=typeof e)throw new Error("no param name set");this.query=this.query||{},this.query[e]=t},setParams:function(e){this.query=e},serialize:function(e){var t=[];for(var n in e)null==e[n]||""===e[n]?t.push(n+"="):t.push(n+"="+e[n]);return t.join("&")},toString:function(){var e=this.serialize(this.query);return this.url+(0<e.length?"?"+e:"")+(this.anchor?"#"+this.serialize(this.anchor):"")},getHashStr:function(e){return this.anchor?"#"+this.serialize(this.anchor):e?"#":""}},Url),placeholder=(le="placeholder"in create("input"),function(e){function t(e){if(!le&&"1"!==(e.getAttribute("hasPlaceholder")||0)){function t(){""===e.value&&(addClass(e,"gray"),e.value=n),e.onfocus=function(){""!==e.value&&e.value!==n||(this.value="",removeClass(e,"gray"))},e.onblur=function(){""===e.value&&(this.value=n,addClass(e,"gray"))}}var n=e.getAttribute("placeholder");n||e.attributes&&e.attributes.placeholder&&(n=e.attributes.placeholder.value);var a,i=e.tagName;if("INPUT"==i){var o=e.type;"password"==o&&n?((a=create("input")).type="text",a.className="pwd_placeholder gray "+e.className,a.value=n,a.autocomplete="off",e.style.display="none",e.parentNode.appendChild(a),a.onfocus=function(){a.style.display="none",e.style.display="",e.focus()},e.onblur=function(){""===e.value&&(a.style.display="",e.style.display="none")}):"text"==o&&n&&t()}else"TEXTAREA"==i&&t();e.setAttribute("hasPlaceholder","1")}}for(var n=e.length-1;0<=n;n--)t(e[n])}),le,Timer=function(){this.list={},this.refNum=0,this.clock=null,this.allpause=!1,this.delay=25,this.add=function(e){if("function"!=typeof e)throw"The timer needs add a function as a parameters";var t=""+(new Date).getTime()+Math.random()*Math.pow(10,17);return this.list[t]={fun:e,pause:!1},this.refNum<=0&&this.start(),this.refNum++,t},this.remove=function(e){this.list[e]&&(delete this.list[e],this.refNum--),this.refNum<=0&&this.stop()},this.pause=function(e){this.list[e]&&(this.list[e].pause=!0)},this.play=function(e){this.list[e]&&(this.list[e].pause=!1)},this.stop=function(){clearInterval(this.clock),this.clock=null},this.start=function(){var e=this;this.clock=setInterval(function(){e.loop.apply(e)},this.delay)},this.loop=function(){for(var e in this.list)this.list[e].pause||this.list[e].fun()}},throttle=function(e,t){clearTimeout(e.__tId__),e.__tId__=setTimeout(function(){e.call(t)},100)};function _throttle(e,t,n){var a=!1;return function(){a||(a=!0,e.apply(n,arguments),setTimeout(function(){null,a=!1},t))}}function _debounce(t,n,a){var i;return function(){var e=arguments;i&&clearTimeout(i),i=setTimeout(function(){t.apply(a,e)},n)}}var reachBottom=(Re=doc.documentElement,Se=doc.body,Te=Math.min,Ue=Math.max,function(){var e=0,t=0;try{return Re&&Re.scrollTop?e=Re.scrollTop:Se&&(e=Se.scrollTop),t=Se.clientHeight&&Re.clientHeight?Te(Se.clientHeight,Re.clientHeight):Ue(Se.clientHeight,Re.clientHeight),Ue(Se.scrollHeight,Re.scrollHeight)-150<e+t}catch(e){return!1}}),Re,Se,Te,Ue,shine=($e=new Timer,function(e,t){var n,a,i=parseParam({start:"#fff",color:"#fbb",times:2,step:5,length:4},t),o=i.start.split(""),s=i.color.split(""),r=[];for(n=0;n<i.step;n+=1){for(var c=o[0],l=1;l<i.length;l+=1){var m=parseInt(o[l],16),u=parseInt(s[l],16);c+=Math.floor(parseInt(m+(u-m)*n/i.step,10)).toString(16)}r.push(c)}for(n=0;n<i.times;n+=1)r=(a=r).slice(0,a.length-1).concat(a.concat([]).reverse());var d=!1,p=$e.add(function(){if(r.length){if(d)return void(d=!1);d=!0,e.style.backgroundColor=r.pop()}else $e.remove(p)})}),$e,createClass=function(e){var c="instance_private";function a(){this.init.apply(this,arguments)}if(e){function t(){}t.prototype=e.prototype,a.prototype=new t}return a.prototype.init=function(){},a.prototype.set=function(e,t){this[c]||(this[c]={});for(var n,a=0,i=this[c],o=e.split("."),s=o.length,r=s-1;a<s;)n=o[a],a==r&&(i[n]=t),i[n]===undefined&&(i[n]={}),i=i[n],a++},a.prototype.get=function(e){this[c]||(this[c]={});for(var t,n=0,a=this[c],i=e.split("."),o=i.length,s=o-1;n<o;){if(t=i[n],n==s)return a[t];a[t]===undefined&&(a[t]={}),a=a[t],n++}},a.extend=function(e){var t=e.extended;for(var n in e)e.hasOwnProperty(n)&&(a[n]=e[n]);t&&t(a)},a.include=function(e){var t=e.included;for(var n in e)e.hasOwnProperty(n)&&(a.prototype[n]=e[n]);t&&t(a)},a},animate=function(){var Tween={Linear:function(e,t,n,a){return n*e/a+t},Quad:{easeIn:function(e,t,n,a){return n*(e/=a)*e+t},easeOut:function(e,t,n,a){return-n*(e/=a)*(e-2)+t},easeInOut:function(e,t,n,a){return(e/=a/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t}},Cubic:{easeIn:function(e,t,n,a){return n*(e/=a)*e*e+t},easeOut:function(e,t,n,a){return n*((e=e/a-1)*e*e+1)+t},easeInOut:function(e,t,n,a){return(e/=a/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t}},Quart:{easeIn:function(e,t,n,a){return n*(e/=a)*e*e*e+t},easeOut:function(e,t,n,a){return-n*((e=e/a-1)*e*e*e-1)+t},easeInOut:function(e,t,n,a){return(e/=a/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t}},Quint:{easeIn:function(e,t,n,a){return n*(e/=a)*e*e*e*e+t},easeOut:function(e,t,n,a){return n*((e=e/a-1)*e*e*e*e+1)+t},easeInOut:function(e,t,n,a){return(e/=a/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t}},Sine:{easeIn:function(e,t,n,a){return-n*Math.cos(e/a*(Math.PI/2))+n+t},easeOut:function(e,t,n,a){return n*Math.sin(e/a*(Math.PI/2))+t},easeInOut:function(e,t,n,a){return-n/2*(Math.cos(Math.PI*e/a)-1)+t}},Expo:{easeIn:function(e,t,n,a){return 0===e?t:n*Math.pow(2,10*(e/a-1))+t},easeOut:function(e,t,n,a){return e==a?t+n:n*(1-Math.pow(2,-10*e/a))+t},easeInOut:function(e,t,n,a){return 0===e?t:e==a?t+n:(e/=a/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(2-Math.pow(2,-10*--e))+t}},Circ:{easeIn:function(e,t,n,a){return-n*(Math.sqrt(1-(e/=a)*e)-1)+t},easeOut:function(e,t,n,a){return n*Math.sqrt(1-(e=e/a-1)*e)+t},easeInOut:function(e,t,n,a){return(e/=a/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t}},Elastic:{easeIn:function(e,t,n,a,i,o){return 0===e?t:1==(e/=a)?t+n:(o||(o=.3*a),s=!i||i<Math.abs(n)?(i=n,o/4):o/(2*Math.PI)*Math.asin(n/i),-i*Math.pow(2,10*(e-=1))*Math.sin((e*a-s)*(2*Math.PI)/o)+t);var s},easeOut:function(e,t,n,a,i,o){return 0===e?t:1==(e/=a)?t+n:(o||(o=.3*a),s=!i||i<Math.abs(n)?(i=n,o/4):o/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*e)*Math.sin((e*a-s)*(2*Math.PI)/o)+n+t);var s},easeInOut:function(e,t,n,a,i,o){return 0===e?t:2==(e/=a/2)?t+n:(o||(o=a*(.3*1.5)),s=!i||i<Math.abs(n)?(i=n,o/4):o/(2*Math.PI)*Math.asin(n/i),e<1?i*Math.pow(2,10*(e-=1))*Math.sin((e*a-s)*(2*Math.PI)/o)*-.5+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*a-s)*(2*Math.PI)/o)*.5+n+t);var s}},Back:{easeIn:function(e,t,n,a,i){return i===undefined&&(i=1.70158),n*(e/=a)*e*((i+1)*e-i)+t},easeOut:function(e,t,n,a,i){return i===undefined&&(i=1.70158),n*((e=e/a-1)*e*((i+1)*e+i)+1)+t},easeInOut:function(e,t,n,a,i){return i===undefined&&(i=1.70158),(e/=a/2)<1?n/2*(e*e*((1+(i*=1.525))*e-i))+t:n/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+t}},Bounce:{easeIn:function(e,t,n,a){return n-Tween.Bounce.easeOut(a-e,0,n,a)+t},easeOut:function(e,t,n,a){return(e/=a)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOut:function(e,t,n,a){return e<a/2?.5*Tween.Bounce.easeIn(2*e,0,n,a)+t:.5*Tween.Bounce.easeOut(2*e-a,0,n,a)+.5*n+t}}},color={sub:function(e,t,n){return n?e.substring(t,t+n):e.substring(t)},hex:function(e){if(e<0)return"00";if(255<e)return"ff";var t="0"+e.toString(16);return t.substring(t.length-2)},GetColors:function(e){var t,n,a;return 3<(e=e.replace("#","")).length?(t=color.sub(e,0,2),n=color.sub(e,2,2),a=color.sub(e,4,2)):(t=color.sub(e,0,1),n=color.sub(e,1,1),a=color.sub(e,2,1),t+=t,n+=n,a+=a),[parseInt(t,16),parseInt(n,16),parseInt(a,16)]}},fn={getElement:function(e){return"string"==typeof e?doc.getElementById(e):e},objType:function(e){switch(Object.prototype.toString.call(e)){case"[object Object]":return"Object";case"[object Number]":return"Number";case"[object Array]":return"Array"}},getStyle:function(e,t){var n;if(doc.defaultView){var a=doc.defaultView.getComputedStyle(e,null);"borderWidth"==t&&(t="borderLeftWidth"),"auto"==(n=t in a?a[t]:a.getPropertyValue(t))&&(n="0px")}return e.style[t]||e.currentStyle&&("auto"==e.currentStyle[t]?"0px":e.currentStyle[t])||n},getOriCss:function(e,t){var n=[];for(var a in t)if(t.hasOwnProperty(a))if("transparent"==fn.getStyle(e,a)||/^#|rgb\(/.test(fn.getStyle(e,a))){if("transparent"==fn.getStyle(e,a)&&n.push([255,255,255]),/^#/.test(fn.getStyle(e,a))&&n.push(color.GetColors(fn.getStyle(e,a))),/^rgb\(/.test(fn.getStyle(e,a))){var i=fn.getStyle(e,a).replace(/^rgb\(([0-9]{0,3}),\s([0-9]{0,3}),\s([0-9]{0,3})\)/g,"$1 $2 $3").split(" ");n.push([parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)])}}else"opacity"==a?n.push(100*fn.getStyle(e,a)):n.push(parseInt(fn.getStyle(e,a),10));return n},getEndCss:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&("opacity"==n?t.push(100*e[n]):/^#/.test(e[n])?t.push(color.GetColors(e[n])):t.push(parseInt(e[n],10)));return t}};function Anim(){this.init.apply(this,arguments[0])}return Anim.prototype={init:function(){var e;if(this.elem=fn.getElement(arguments[0]),this.cssObj=arguments[1],this.cssOri=fn.getOriCss(this.elem,arguments[1]),this.cssEnd=fn.getEndCss(arguments[1]),this.durtime=arguments[2],this.animType="Tween.Linear",this.funObj=null,this.start=!1,this.complete=!1,this.onPause=!1,this.onRestart=!1,arguments.length<3)throw new Error("至少要传入3个参数");if(4==arguments.length){if("Object"==fn.objType(arguments[3]))for(e in this.funObj=arguments[3],this.funObj)"start"==e.toString()&&(this.start=!0),"complete"==e.toString()&&(this.complete=!0);"string"==typeof arguments[3]&&(this.animType=arguments[3])}else if(5==arguments.length&&(this.animType=arguments[3],"Object"==fn.objType(arguments[4])))for(e in this.funObj=arguments[4],this.funObj)"start"==e.toString()&&(this.start=!0),"complete"==e.toString()&&(this.complete=!0);this.startAnim()},startAnim:function(){this.start&&this.funObj.start.call(this,this.elem);var that=this,t=0,props=[];for(var pro in this.cssObj)this.cssObj.hasOwnProperty(pro)&&props.push(pro);clearInterval(this.timer),this.timer=setInterval(function(){var d,c1,c2,c3,b1,b2,b3,r,g,b,i;if(that.onPause)clearInterval(that.timer);else if(t<that.durtime/10)for(t++,i=0;i<props.length;i++){var c;"Array"!=fn.objType(that.cssOri[i])&&(b=that.cssOri[i]),"Array"!=fn.objType(that.cssEnd[i])&&(c=that.cssEnd[i]-that.cssOri[i]),d=that.durtime/10,"Array"==fn.objType(that.cssOri[i])&&"Array"==fn.objType(that.cssEnd[i])?(b1=that.cssOri[i][0],b2=that.cssOri[i][1],b3=that.cssOri[i][2],c1=that.cssEnd[i][0]-that.cssOri[i][0],c2=that.cssEnd[i][1]-that.cssOri[i][1],c3=that.cssEnd[i][2]-that.cssOri[i][2],r=color.hex(Math.ceil(eval(that.animType)(t,b1,c1,d))),g=color.hex(Math.ceil(eval(that.animType)(t,b2,c2,d))),b=color.hex(Math.ceil(eval(that.animType)(t,b3,c3,d))),that.elem.style[props[i]]="#"+r+g+b):"opacity"==props[i].toString()?that.elem.style[props[i]]=Math.ceil(eval(that.animType)(t,b,c,d))/100:that.elem.style[props[i]]=Math.ceil(eval(that.animType)(t,b,c,d))+"px"}else{for(i=0;i<props.length;i++)"Array"==fn.objType(that.cssOri[i])&&"Array"==fn.objType(that.cssEnd[i])?(c1=that.cssEnd[i][0],c2=that.cssEnd[i][1],c3=that.cssEnd[i][2],r=color.hex(Math.ceil(eval(that.animType)(t,b1,c1,d))),g=color.hex(Math.ceil(eval(that.animType)(t,b2,c2,d))),b=color.hex(Math.ceil(eval(that.animType)(t,b3,c3,d))),that.elem.style[props[i]]="#"+r+g+b):"opacity"==props[i].toString()?that.elem.style[props[i]]=that.cssEnd[i]/100:that.elem.style[props[i]]=that.cssEnd[i]+"px";clearInterval(that.timer),that.complete&&that.funObj.complete.call(that,that.elem)}},10)},pause:function(){this.onPause=!0}},function(){return new Anim(arguments)}}(),getGuid=function(){return Math.abs((new Date).getTime())+"_"+Math.round(1e8*Math.random())};function template(n,e,i){var t,a=Object.prototype.toString.call(e),o=0;if("[object Array]"===a){for(t=[],o=0;o<e.length;o++)t.push(s(e[o],o));t=t.join("")}else"[object Object]"===a&&(t=s(e,o++));return t;function s(e,t){var a=i?i(e,t):e;return n.replace(/@@(\w+)@@/g,function(e,t){var n=a[t];return void 0===n?e:n})}}function xhr(e){var t=new XMLHttpRequest;t.open("GET",e,!0),t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&200===t.status&&console.log(t.responseText)},t.send()}function getJsonp(e,t){function n(){s.onreadystatechange=s.onload=null,window[l]=null,o.removeChild(s)}var a,i=Date.now(),o=document.getElementsByTagName("body")[0],s=document.createElement("script"),r=t.data,c="?",l=t.jsonpCallback||"jsonp_"+i,m=t.jsonp||"callback";if(s.charset=t.charset||"utf-8",s.type="text/javascript",window[l]=t.success,r)for(a in r)r.hasOwnProperty(a)&&(c+=a+"="+r[a]+"&");"onreadystatechange"in s?s.onreadystatechange=function(){"loaded"===s.readyState.toLowerCase()&&n()}:s.onload=function(){n()},s.src=e+c+m+"="+l+(t.cache?"":"&_="+i),o.appendChild(s)}function getScript(e,t){var n=document.createElement("script");n.charset="utf-8",n.type="text/javascript",n.src=e,document.getElementsByTagName("body")[0].appendChild(n),"onreadystatechange"in n?n.onreadystatechange=function(){"loaded"===n.readyState.toLowerCase()&&t&&t()}:n.onload=function(){t&&t()}}var jsonp=function(url,cb){var head=byTag("head")[0],ojs=byId(url);ojs&&head.removeChild(ojs),-1==url.indexOf("&")?url+="?":url+="&",url=url+"_t"+getGuid();var fun=exports.fun="jsonp_"+getGuid();"function"==typeof cb&&eval(fun+"=function(res){cb(res)}"),url=url+"&callback="+fun;var js=create("script");js.src=url,js.id=url,js.type="text/javascript",js.language="javascript",head.appendChild(js)},jsLoad=function(e,t){var n=byTag("head")[0],a=create("script"),i=!1;a.onload=a.onreadystatechange=function(){i||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(i=!0,a.onload=a.onreadystatechange=null,"function"==typeof t&&t())},a.src=e;try{n.appendChild(a)}catch(e){}},ijax={arrTaskLists:[],createLoadingIframe:function(){if(null!=this.loadFrames)return!1;var e="loadingIframe_thread"+Math.ceil(1e4*Math.random()),t="loadingIframe_thread"+Math.ceil(1e4*(Math.random()+1));this.loadFrames=[e,t];var n="";ua.isIE6&&(n='javascript:void((function(){document.open();document.domain="sina.com-39.cn"/*tpa=http://finance.sina.com.cn/other/src/sina.com.cn*/;document.close()})())');var a='<iframe id="'+e+'" name="'+e+'" class="invisible" scrolling="no" src="" allowTransparency="true" style="display:none;" frameborder="0" ></iframe><iframe id="'+t+'" name="'+t+'" class="invisible" scrolling="no" src="'+n+'" allowTransparency="true" style="display:none;" frameborder="0" ></iframe>',i=create("div");i.id="ijax_iframes",i.innerHTML=a,doc.body.appendChild(i);var o=setInterval(bind2(function(){null!=byId(this.loadFrames[0])&&null!=byId(this.loadFrames[1])&&(clearInterval(o),o=null,this.loadingIframe={thread1:{container:byId(this.loadFrames[0]),isBusy:!1},thread2:{container:byId(this.loadFrames[1]),isBusy:!1}},this.loadByList())},this),10)},isIjaxReady:function(){if(typeof this.loadingIframe==C.U)return!1;for(var e in this.loadingIframe)if(!this.loadingIframe[e].isBusy)return this.loadingIframe[e].isBusy=!0,this.loadingIframe[e];return!1},request:function(e,t){var n={};n.url=e,n.option=t||{},this.arrTaskLists.push(n),null==this.loadFrames?this.createLoadingIframe():this.loadByList()},loadByList:function(){if(0===this.arrTaskLists.length)return!1;var e=this.isIjaxReady();if(!e)return!1;var t=this.arrTaskLists[0];this.loadData(t.url,t.option,e),this.arrTaskLists.shift()},loadData:function(e,a,i){var o=new Url(e);if(a.GET)for(var t in a.GET)o.setParam(t,encodeDoubleByte(a.GET[t]));o=o.toString();var s=i.container;if(s.listener=bind2(function(){if(a.onComplete||a.onException)try{var e,t=s.contentWindow.document,n=byTag("textarea")[0];e=typeof n!=C.U?n.value:t.body.innerHTML,a.onComplete?a.onComplete(e):a.onException()}catch(e){a.onException&&a.onException(e.message,o.toString())}i.isBusy=!1,removeEvent(s,"load",s.listener),this.loadByList()},this),addEvent(s,"load",s.listener),a.POST){var n=create("form");for(var r in n.id="IjaxForm",n.action=o,n.method="post",n.target=s.id,a.POST){var c=create("input");c.type="hidden",c.name=r,c.value=a.POST[r],n.appendChild(c)}doc.body.appendChild(n);try{n.submit()}catch(e){}}else try{window.frames(s.id).location.href=o}catch(e){s.src=o}}},html5Ijax=(Xj=/^http\s?\:\/\/[a-z\d\-\.]+/i,Yj="ijax-html5-iframe-",Zj.prototype={ready:!1,init:function(e){if(!this.ready){var t,n,a,i,o,s=this,r=e.proxyUrl;if(s.onsuccess=e.onsuccess||Wj,s.onfailure=e.onfailure||Wj,r){o=function(e){if(s.ready&&e.origin===s.target){var t=e.data;t&&"failure"!==t?(s.onsuccess&&s.onsuccess(e.data),s.destroy()):(s.destroy(),s.onfailure&&s.onfailure())}else s.destroy()},addEvent(window,"message",o),n='<iframe id="'+(t=Yj+Date.parse(new Date))+'" name="'+t+'" src="'+r+'" frameborder="0" style="width:0;height:0;display:none;"></iframe>';var c=create("div");c.id=Yj+"iframes",c.innerHTML=n,a=c.childNodes[0],i=function(){s.ready=!0;var e=a.src.match(Xj);s.target=e&&e[0]||"*"},addEvent(a,"load",i),doc.body.insertBefore(a,doc.body.firstChild),s._iframe=a,s._iframeLoaded=i,s._receiver=o}}},send:function(e){var t=this,n=(e=e||{}).url,a=e.data,i=e.onsuccess,o=e.onfailure;n&&"string"==typeof n&&(i&&(t.onsuccess=i),o&&(t.onfailure=o),t.ready?(a?a+="&_url="+window.encodeURIComponent(n):a="_url="+window.encodeURIComponent(n),t._iframe.contentWindow.postMessage(a,t.target)):setTimeout(function(){t.send(e)},50))},destroy:function(){var e=this._iframe;removeEvent(e,"load",this._iframeLoaded),e.parentNode.removeChild(e),removeEvent(window,"message",this._receiver),this._iframe=null,this._iframeLoaded=null,this._receiver=null}},Zj),Xj,Yj;function Wj(){}function Zj(e){e=e||{},this.init(e)}var MessageStorage=function(){if(window.localStorage)return{set:function(e,t){localStorage.setItem(e,t)},get:function(e){return localStorage.getItem(e)},remove:function(e){localStorage.removeItem(e)},clear:function(){localStorage.clear}}}(),$={C:C,doc:doc,byId:byId,byTag:byTag,byAttr:byAttr,hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,preventDefault:preventDefault,stopPropagation:stopPropagation,contains:contains,create:create,insertAfter:insertAfter,ua:ua,domReady:domReady,timeoutHandle:timeoutHandle,cssSupports:cssSupports,getXY:getXY,getScrollPos:getScrollPos,getPosition:getPosition,getStyle:getStyle,getOuterStyle:getOuterStyle,setStyle:setStyle,trim:trim,encodeHTML:encodeHTML,decodeHTML:decodeHTML,encodeDoubleByte:encodeDoubleByte,byteLength:byteLength,strLeft:strLeft,indexOf:indexOf,inArray:inArray,isArray:isArray,isEmptyObj:isEmptyObj,isFn:isFn,extend:extend,jsonToQuery:jsonToQuery,queryToJson:queryToJson,addEvent:addEvent,removeEvent:removeEvent,fixEvent:fixEvent,byClass:byClass,builder:builder,custEvent:custEvent,delegatedEvent:delegatedEvent,bind2:bind2,parseParam:parseParam,Url:Url,placeholder:placeholder,Timer:Timer,throttle:throttle,_throttle:_throttle,_debounce:_debounce,reachBottom:reachBottom,shine:shine,createClass:createClass,animate:animate,getGuid:getGuid,jsonp:jsonp,jsLoad:jsLoad,ijax:ijax,html5Ijax:html5Ijax,getScript:getScript,getJsonp:getJsonp,xhr:xhr,template:template,messageStorage:MessageStorage,register:function(e,t){for(var n,a=0,i=$,o=e.split("."),s=o.length,r=s-1;a<s;){if(n=o[a],a==r){if(i[n]!==undefined)throw o+":: has registered";i[n]=t($)}i[n]===undefined&&(i[n]={}),i=i[n],a++}}},EXPORTS_NAME="sinacMNT",UGLIFY_NAME="___"+EXPORTS_NAME+"___";exports[EXPORTS_NAME]=exports[UGLIFY_NAME]=$}(window),window.___sinacMNT___.register("msg",function(){var n={I001:"评论成功",I002:"并已转发微博",I003:"请输入评论",I004:"请输入密码",I005:"请先登录再提交评论",I006:"已到最后一页",I007:"发布",I008:"赞",I008d:"已赞",I008e:"您已赞过该评论",I009:"回复",I010:"微博账号/博客/邮箱",I011:"下次自动登录",I012:"注册",I013:"忘记密码？",I014:"点击加载更多",I015:"最热评论",I016:"最新评论",I017:"刷新",I018:"分享到微博",I019:"分享",I020:"分享到新浪微博",I021:"分享到腾讯微博",I022:"月",I023:"日",I024:"今天",I025:"秒前",I026:"分钟前",I027:"更多精彩评论&gt;&gt;",I028:"还有<em><% this.num %></em>条评论",I029:"登录",I030:"退出",I031:"<em><% this.comment %></em>条评论",I032:"<em><% this.person %></em>人参与",I033:"<em><% this.post %></em>条相关帖子",I034:"查看对话",I035:"收起对话",I036:"回复<% this.userLnk %>：",I037:"：",I038:"网友评论",I039:'<span class="reply-form-tip"><em>点赞成功！</em>再对TA说点什么吧~</span>',I040:"查看剩余<em><% this.replyNum %></em>条回复",I041:"加载中，请稍候...",I042:"评论超时，请稍候再试",I043:"举报",I045:'根据<a href="c_1121541842.htm"/*tpa=http://www.cac.gov.cn/2017-08/25/c_1121541842.htm*/ target="_blank">《互联网跟帖评论服务管理规定》</a><br>发布评论前请绑定手机号，谢谢！',I046:"绑定手机号",I047:"关闭",I048:"查看全部<em><% this.totalNum %></em>条评论 &gt;",I049:"评论失败，您的账号已被封禁",I050:"评论失败"};return{set:function(e,t){"all"!==e?n[e]=t:n=t},get:function(e){return void 0===e?n:n[e]}}}),function(r){var c=location.protocol,l=r.___sinacMNT___;if(l.custEvent.define(l,["ce_login","ce_weiboLogin","ce_weiboLogout","ce_loginError","ce_logout","ce_preLogin","ce_layerHide","ce_layerShow","ce_cmnt_new","ce_cmnt_close"]),!r.SINA_OUTLOGIN_LAYER)throw new Error(c+"//i.sso.sina.com.cn/js/outlogin_layer.js not loaded");var m=r.SINA_OUTLOGIN_LAYER,u="default.html-info_type=1&style=1&user_uid="/*tpa=http://comment5.news.sina.com.cn/comment/skin/default.html?info_type=1&style=1&user_uid=*/;l.register("login",function(){function a(e,t){var n=["login","pre_login","weibo_login","logout","weibo_login_security"],a="sinacMNT_";t=t||0;var i=l.byTag("body")[0];if(i){l.addClass(i,a+e);for(var o=0,s=n.length;o<s;o++){var r=n[o];r==e||t||l.removeClass(i,a+r)}}}function i(t){l.jsonp(c+"//comment5.news.sina.com.cn/user/security",function(e){e&&e.result&&e.result.data&&(e.result.data.is_security&&"function"==typeof t&&t())})}var e=l.createClass(),o=null,s="";return e.include({init:function(e){this._setOpt(e),this._setLogin()},_setOpt:function(e){this.set("opt",l.extend({loginSuccess:function(){},logoutSuccess:function(){},error:function(e){}},e,!0))},_setLogin:function(){var t=this;m.STK.Ready(function(){m.register("login_success",function(){t.lInSuccess()}).register("logout_success",function(){t.lOutSuccess()}).register("login_error",function(e){t.lInError(e)}).register("layer_hide",function(){l.custEvent.fire(l,"ce_layerHide")}).register("layer_show",function(){l.custEvent.fire(l,"ce_layerShow")}).register("pre_login_state",function(){m.isPreLoginState&&(a("pre_login"),t.getPreLoginWeiboInfo(function(e){e.data-((o=e.data).name=o.name--o.screen_name,l.custEvent-1.fire(l,"/*tpa=http://finance.sina.com.cn/other/src/),t.getPreLoginWeiboInfo(function(e){e.data?((o=e.data).name=o.name||o.screen_name,l.custEvent.fire(l,*/ce_preLogin")):o=null},function(){}))}),m.init(),t.isLogin()||a("logout")})},lOutSuccess:function(){var e=this.get("opt");s="",l.custEvent.fire(l,"ce_logout"),e.logoutSuccess(),a("logout")},lInSuccess:function(t){var e=this.get("opt");s=m.getSinaCookie().uid||"",this.getWeiboInfo(function(e){a("weibo_login"),e.result&&e.result.data-(o=e.result.data,l.custEvent-1.fire(l,"/*tpa=http://finance.sina.com.cn/other/src/),e.result&&e.result.data?(o=e.result.data,l.custEvent.fire(l,*/ce_weiboLogin"),i(function(){a("weibo_login_security",1)})):(o=null,l.custEvent.fire(l,"ce_weiboLogout")),l.custEvent.fire(l,"ce_login"),l.isFn(t)},function(){a("login"),l.isFn(t)}),e.loginSuccess()},lInError:function(e){var t=this.get("opt");s="";var n=!l.inArray(e.errno,["5024","5025","4049","2070"]);if(!e.result)return l.custEvent.fire(l,"ce_loginError",{validated:n,info:e}),t.error(),!1},isLogin:function(){return m.isLogin()},getWeiboInfo:function(n,e){var t=r.sinaSSOController.getSinaCookie(),a=c+"//api.sina.com.cn/weibo/2/users/show.json?uid="+t.uid+"&source=2835469272",i=l.getGuid();l.timeoutHandle(i,function(t){t.timeout(i,function(){e()}),l.jsonp(a,function(e){n(e),t.success(i)})},3e3)},getPreLoginWeiboInfo:function(t,n){i(function(){a("weibo_login_security",1)}),m.getPreLoginWeiboData({timeout:3e4,onSuccess:function(e){t(e)},onFailure:function(e){n(e)}})},lOut:function(){m.logout()},lIn:function(e,t,n){if(window.SINA_USER_PANEL){var a=window.SINA_USER_PANEL;try{a.setOutLoginMiddle(!0)}catch(e){}a.getOutLogin().show()}else m.show()},getName:function(){var e="",t=m.getSinaCookie();return o?e='<a href="index-869.htm"/*tpa=http://weibo.com/u/'+o.id+'/*/ target="_blank" data-sudaclick="comment_nickname_p">'+(o.screen_name||o.name)+"</a>":t&&(e='<a href="'+u+t.uid+'" target="_blank" data-sudaclick="comment_nickname_p">'+(t.nick||t.name)+"</a>"),e},getFace:function(){var e="",t="male_180-1.png"/*tpa=http://img.t.sinajs.cn/t5/style/images/face/male_180.png*/,n=m.getSinaCookie(),a=c+"//weibo.com/";return o?(a=c+"//weibo.com/u/"+o.id+"/",e=o.screen_name||o.name,t=o.profile_image_url.replace("/50/","/180/").replace(/^http[s]?\:(?=\/\/)/,"")):n&&(t="//portrait5.sinaimg.cn/"+n.uid+"/blog/50",e=n.nick||n.name,a=u+n.uid),'<a href="'+a+'" target="_blank" title="'+e+'" data-sudaclick="comment_avatar_p"><img src="'+t+'" alt="" /></a>'},getInfo:function(){return{sina:m.getSinaCookie(),weibo:o}},getCommentConfig:function(){var e=this.getInfo(),t="";if(e.weibo){var n=e.weibo;t="&wb_verified="+n.verified+"&wb_screen_name="+n.screen_name+"&wb_user_id="+n.idstr+"&wb_time=&wb_profile_img="+n.profile_image_url}return t},isUidChanged:function(){var e=m.getSinaCookie().uid;return s!==e}}),new e})}(window),function(exports,undefined){var $=exports.___sinacMNT___,doc=$.doc;$.register("app",function(){var app={},cm,dm;function kn(e,t){var n=this,a={clzPrefix:"autogrow-textarea-",minHeight:"auto",maxHeight:1/0,context:e.parentNode,styles:{},realTime:!0,speed:200};"auto"===(t=$.extend(a,t)).minHeight&&(t.minHeight=$.getStyle(e,"height").replace("px","")),e&&(n.stop=!1,n.config=t,n.textarea=e,n._bindEvent(),n.setCloneStyle(),n.grow())}return app.sima={conf:{action:"tydata_fail",data:{},pk:"187522",uk:"ty"},source:location.protocol+"//news.sina.com.cn/js/pctianyi/sima.js",track:function(e){var t=this;e&&(t.conf.data=e),window.SIMA?window.SIMA(t.conf):$.getScript(this.source,function(){window.SIMA(t.conf)})}},app.track=function(e,t){try{exports._S_uaTrack(e,t)}catch(e){}},app.textareaUtils=(cm={},dm=doc.selection,cm.selectionStart=function(e){if(!dm)return e.selectionStart;var t=dm.createRange(),n=0,a=doc.body.createTextRange();for(a.moveToElementText(e);a.compareEndPoints("StartToStart",t)<0;n++)a.moveStart("character",1);return n},cm.selectionBefore=function(e){return e.value.slice(0,cm.selectionStart(e))},cm.selectText=function(e,t,n){if(e.focus(),dm){var a=e.createTextRange();a.collapse(1),a.moveStart("character",t),a.moveEnd("character",n-t),a.select()}else e.setSelectionRange(t,n)},cm.insertText=function(e,t,n,a){if(e.focus(),a=a||0,!dm){var i=e.value,o=n-a,s=o+t.length;return e.value=i.slice(0,o)+t+i.slice(n,i.length),void cm.selectText(e,s,s)}var r=dm.createRange();r.moveStart("character",-a),r.text=t},cm.getCursorPos=function(e){var t=0;if($.ua.isIE){e.focus();var n=null,a=(n=dm.createRange()).duplicate();a.moveToElementText(e),a.setEndPoint("EndToEnd",n),e.selectionStart=a.text.length-n.text.length,e.selectionEnd=e.selectionStart+n.text.length,t=e.selectionStart}else!e.selectionStart&&"0"!==e.selectionStart||(t=e.selectionStart);return t},cm.getSelectedText=function(e){var t;return window.getSelection?(t=e).selectionStart!==undefined&&t.selectionEnd!==undefined?t.value.substring(t.selectionStart,t.selectionEnd):"":dm.createRange().text},cm.setCursor=function(e,t,n){if(t=null===t?e.value.length:t,n=null===n?0:n,e.focus(),e.createTextRange){var a=e.createTextRange();a.move("character",t),a.moveEnd("character",n),a.select()}else e.setSelectionRange(t,t+n)},cm.unCoverInsertText=function(e,t,n){(n=null===n?{}:n).rcs=null===n.rcs?e.value.length:1*n.rcs,n.rccl=null===n.rccl?0:1*n.rccl;var a=e.value,i=a.slice(0,n.rcs),o=a.slice(n.rcs+n.rccl,""===a?0:a.length);e.value=i+t+o,this.setCursor(e,n.rcs+(null===t?0:t.length))},cm),app.splitNum=function(e){e+="";for(var t=/(-?\d+)(\d{3})/;t.test(e);)e=e.replace(t,"$1,$2");return e},app.template=function(e,t){function n(e,t){for(var n,a=/<%([^%>]+)?%>/g,i=/(^( )?(if|for|else|switch|case|break|{|}))(.*)?/g,o="var r=[];\n",s=0,r=function(e,t){return o+=t?e.match(i)?e+"\n":"r.push("+e+");\n":e?'r.push("'+e.replace(/"/g,'\\"')+'");\n':"",r};n=a.exec(e);)r(e.slice(s,n.index))(n[1],!0),s=a.lastIndex;return r(e.substr(s,e.length-s)),o+='return r.join("");',new Function(o.replace(/[\r\t\n]/g,"")).call(t)}var a;return void 0!==(a=e)&&a.nodeName&&a.nodeType?n(/^(textarea|input)$/i.test(e.nodeName)?e.value:e.innerHTML,t):n(e,t)},app.simCheckbox=function(e){var t="sina-comment-chkbox-selected";$.hasClass(e,t)?($.removeClass(e,t),e.setAttribute("checked",0)):($.addClass(e,t),e.setAttribute("checked",1))},app.textareaAutoGrow=(kn.prototype={constructor:kn,_bindEvent:function(){var t=this,e=t.textarea;$.addEvent(e,"keyup",function(e){t.throttleGrow()}),$.addEvent(e,"focus",function(e){t.throttleGrow()}),$.addEvent(window,"resize",function(e){t.throttleGrow()})},setCloneStyle:function(){var e=this,t=e.config,n=e.textarea;e.clone||(e.clone=document.createElement("div"),e.clone.className=t.clzPrefix+"clone",t.context.appendChild(e.clone));var a=e.clone,i={position:"absolute",wordWrap:"break-word",top:0,left:"-9999px"},o={};o=$.isEmptyObj(t.styles)?$.extend(i,{width:$.getStyle(n,"width"),fontSize:$.getStyle(n,"fontSize"),fontFamily:$.getStyle(n,"fontFamily"),lineHeight:$.getStyle(n,"lineHeight")}):$.extend(i,t.styles),$.setStyle(a,o)},throttleGrow:function(){this.stop||$.throttle(this.grow,this,this.config.speed)},grow:function(){var e=this,t=e.config;t.realTime&&e.setCloneStyle(),e.clone.innerHTML=function(e){return e.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(e){return function(e,t){for(var n=0,a="";n<t;n++)a+=e;return a}("&nbsp;",e.length-1)+" "})}(e.textarea);var n=$.getStyle(e.clone,"height").replace("px",""),a="hidden";(n=Math.max(n,t.minHeight))>t.maxHeight&&(n=t.maxHeight,a="auto"),n=Math.min(n,t.maxHeight),$.setStyle(e.textarea,{height:n+"px",overflow:a})},revive:function(){this.stop=!1},destroy:function(){this.stop=!0}},kn),app.getWinSize=function(e){var t,n,a;return"CSS1Compat"===(a=e?e.document:document).compatMode?(t=a.documentElement.clientWidth,n=a.documentElement.clientHeight):window.innerHeight?(t=(a=e?e.self:window).innerWidth,n=a.innerHeight):a.documentElement&&a.documentElement.clientHeight?(t=a.documentElement.clientWidth,n=a.documentElement.clientHeight):a.body&&(t=a.body.clientWidth,n=a.body.clientHeight),navigator.userAgent.match(/iPad;.*CPU.*OS 7_\d/i)&&!window.navigator.standalone&&n<t&&(n=672),{width:t,height:n}},app.post=function(url,param,cb,timeoutCb,time){var cbName="iJax_"+Date.now();try{doc.domain="sina.com-39.cn"/*tpa=http://finance.sina.com.cn/other/src/sina.com.cn*/}catch(e){}param.callback=cbName;var TIMEOUT_NAME="TD_"+(new Date).getTime();$.timeoutHandle(TIMEOUT_NAME,function(handle){if(handle.timeout(TIMEOUT_NAME,function(){"function"==typeof timeoutCb&&timeoutCb()}),window[cbName]=function(m){"string"==typeof m&&(m=eval("("+m+")")),"function"==typeof cb&&cb(m),handle.success(TIMEOUT_NAME)},!$.ua.isFF||param.iframe&&1===param.iframe)$.ijax.request(url,{POST:param});else{param.callback=undefined,param=$.jsonToQuery(param);var Sender=new $.html5Ijax({proxyUrl:location.protocol+"//comment5.news.sina.com.cn/comment/postmsg.html"});Sender.send({url:url,data:param,onsuccess:window[cbName],onfailure:function(){}})}},time||5e3)},app.cmntEncodeHtml=function(e){return $.encodeHTML($.decodeHTML(e))},app})}(window),function(exports,undefined){var $=exports.___sinacMNT___,doc=$.doc,uaTrack=$.app.track,UNDEFINED=$.C.U,app=$.app,getMsg=$.msg.get,appTemplate=$.app.template;if(!$.cssSupports("borderRadius")){var docEle=document.documentElement;$.addClass(docEle,"sinacMNT-no-border-radius")}var getPar=function(e,t){var n=e.parentNode;return n&&n.getAttribute&&n.getAttribute("comment-type")===t?n:"body"===n.tagName.toLowerCase()?n:getPar(n,t)};$.register("cmnt",function(){var cmnt={},Xn,Yn,Zn,Tp,Up,bq,eq,fq,gq,jq,Wq,Bs,Ts,$s,_s,at,bt,dt,jt,kt,Hu,Iu,Ju,dv,ev,Dv,Ev,Fv,Gv,cw,xw,ox,Cx,Dx,Ex,XA,YA,ZA,$A,bB,uC,vC,iD;function Vp(){var e=$.create("div");return e.className="sina-comment-tip",Tp.appendChild(e),e}function dq(e,t){return 3===e.nodeType?fq(e,t):eq(e,t)}function iq(e,t,n,a){var i=document.createElement("a");i.href="javascript:;",i.className=n,i.setAttribute("action-type","txt-toggle"),i.setAttribute("action-data","type="+a),i.innerHTML=t,e.appendChild(i)}function Xq(){var e=$.create("div");return e.className="sina-comment-vote-tip",e.style.display="none",e.style.position="absolute",$.byTag("body")[0].appendChild(e),e}function Zq(e,t,n){var a=$.getOuterStyle(e,"width"),i=$.getOuterStyle(e,"height");return a=parseFloat(a),a=isNaN(a)?t:a,i=parseFloat(i),{width:a,height:i=isNaN(i)?n:i}}function ct(e){return"<% this."+e+" %>"}function et(){return{formList:'<div class="sina-comment-form sina-comment-top"'+bt+'"form"></div><div class="sina-comment-list"'+bt+'"list"></div>',list:["<div"+at+'"hot-wrap"'+bt+'"hotWrap">',"<div"+at+'"title"><span'+at+'"name">'+getMsg("I015")+"</span> <a"+_s+'"reflash"'+$s+'"type=hot"'+at+'"reflash" href="javascript:;"'+bt+'"hotReflash" data-sudaclick="comment_refresh_i" style="display:none;">'+getMsg("I017")+"</a> </div>","<div"+at+'"hot-loading loading"><a href="javascript:;"></a></div>',"<div"+at+'"list"'+bt+'"hotList"></div>',"</div>","<div"+at+'"latest-wrap"'+bt+'"latestWrap">',"<div"+at+'"title"><span'+at+'"name">'+getMsg("I016")+"</span> <a"+_s+'"reflash"'+$s+'"type=latest"'+at+'"reflash" href="javascript:;"'+bt+'"latestReflash" data-sudaclick="comment_refresh_i" style="display:none;">'+getMsg("I017")+"</a> </div>","<div"+at+'"latest-loading loading"><a href="javascript:;"></a></div>',"<div"+at+'"list"'+bt+'"latestList"></div>',"<div"+_s+'"getMore"'+$s+'"type=latest" '+bt+'"latestMore" class="list-ft"><a href="javascript:;" class="more" data-sudaclick="comment_allcomment_p">'+getMsg("I014")+"</a></div>","</div>","<div"+at+'"all-loading loading"><a href="javascript:;" data-sudaclick="comment_allcomment_p"></a></div>'].join(""),cont:["\x3c!-- 头像 start --\x3e","<div"+at+'"head">'+ct("userFace")+"</div>","\x3c!-- 头像 end --\x3e","\x3c!-- 内容 start --\x3e","<div"+at+'"cont"'+bt+'"itemCont">',"<div"+at+'"info">',"<span"+at+'"name '+ct("userIco")+'">',ct("userLnk"),"</span>","<span"+at+'"area">'+ct("area")+"</span>",ct("newsLnk"),"</div>","<div"+at+'"txt" comment-type="itemTxt">',ct("contWithReply"),"</div>","<div"+at+'"action">',ct("time"),"<% if(this.mid) {%>",'<a class="report" href="feedback_jb.html-mid='+ct("/*tpa=http://comment5.news.sina.com.cn/comment/skin/feedback_jb.html?mid='+ct(*/mid")+'" target="_blank" data-sudaclick="comment_report_i">'+getMsg("I043")+"</a>","<span"+at+'"btns">',"<% if(this.hasReply) {%>","<a"+at+'"show"'+_s+'"dialogShow"'+$s+'"channel='+ct("channel")+"&allNewsid="+ct("allNewsid")+"&newsid="+ct("newsid")+"&mid="+ct("mid")+"&uid="+ct("uid")+"&nick="+ct("nick")+"&parent="+ct("parent")+"&thread="+ct("thread")+"&userLnk="+ct("oUserLnk")+"&cont="+ct("oCont")+'" href="javascript:;" hidefocus >'+getMsg("I034")+"</a>","<% }%>","<% if(this.isAgreed) {%>","<a"+at+'"vote vote-active" title="'+getMsg("I008d")+'"'+_s+'"vote"'+$s+'"channel='+ct("channel")+"&newsid="+ct("newsid")+"&mid="+ct("mid")+'" href="javascript:;" data-sudaclick="comment_like_i" voted="true"><span>'+getMsg("I008d"),"<% }else{ %>","<a"+at+'"vote" title="'+getMsg("I008")+'"'+_s+'"vote"'+$s+'"channel='+ct("channel")+"&newsid="+ct("newsid")+"&mid="+ct("mid")+'" href="javascript:;" data-sudaclick="comment_like_i"><span>'+getMsg("I008"),"<%}%>","<% if(parseInt(this.agree)) {%>","<em "+bt+'"voteNum">'+ct("agree")+"</em>","<% }else{ %>","<em "+bt+'"voteNum"></em>',"<%}%>","</span>","</a>","<a"+at+'"reply"'+_s+'"reply"'+$s+'"channel='+ct("channel")+"&allNewsid="+ct("allNewsid")+"&newsid="+ct("newsid")+"&mid="+ct("mid")+"&uid="+ct("uid")+"&nick="+ct("nick")+"&parent="+ct("parent")+"&thread="+ct("thread")+"&userLnk="+ct("oUserLnk")+"&cont="+ct("oCont")+'" href="javascript:;" hidefocus data-sudaclick="comment_reply_i">'+getMsg("I009")+"</a>","</span>","<%}%>","</div>","</div>","\x3c!-- 内容 end --\x3e"].join(""),contWithUserFrom:["\x3c!-- 头像 start --\x3e","<div"+at+'"head">'+ct("userFace")+"</div>","\x3c!-- 头像 end --\x3e","\x3c!-- 内容 start --\x3e","<div"+at+'"cont"'+bt+'"itemCont">',"<div"+at+'"info">',"<span"+at+'"name '+ct("userIco")+'">',ct("userLnk"),"</span>","<span"+at+'"area">'+ct("area")+"</span>",ct("userFrom"),ct("newsLnk"),"</div>","<div"+at+'"txt" comment-type="itemTxt">',ct("contWithReply"),"</div>","<div"+at+'"action">',ct("time"),"<% if(this.mid) {%>",'<a class="report" href="feedback_jb.html-mid='+ct("/*tpa=http://comment5.news.sina.com.cn/comment/skin/feedback_jb.html?mid='+ct(*/mid")+'" target="_blank" data-sudaclick="comment_report_i">'+getMsg("I043")+"</a>","<span"+at+'"btns">',"<% if(this.hasReply) {%>","<a"+at+'"show"'+_s+'"dialogShow"'+$s+'"channel='+ct("channel")+"&allNewsid="+ct("allNewsid")+"&newsid="+ct("newsid")+"&mid="+ct("mid")+"&uid="+ct("uid")+"&nick="+ct("nick")+"&parent="+ct("parent")+"&thread="+ct("thread")+"&userLnk="+ct("oUserLnk")+"&cont="+ct("oCont")+'" href="javascript:;" hidefocus >'+getMsg("I034")+"</a>","<% }%>","<% if(this.isAgreed) {%>","<a"+at+'"vote vote-active" title="'+getMsg("I008d")+'"'+_s+'"vote"'+$s+'"channel='+ct("channel")+"&newsid="+ct("newsid")+"&mid="+ct("mid")+'" href="javascript:;" data-sudaclick="comment_like_i" voted="true"><span>'+getMsg("I008d"),"<% }else{ %>","<a"+at+'"vote" title="'+getMsg("I008")+'"'+_s+'"vote"'+$s+'"channel='+ct("channel")+"&newsid="+ct("newsid")+"&mid="+ct("mid")+'" href="javascript:;" data-sudaclick="comment_like_i"><span>'+getMsg("I008"),"<%}%>","<% if(parseInt(this.agree)) {%>","<em "+bt+'"voteNum">'+ct("agree")+"</em>","<% }else{ %>","<em "+bt+'"voteNum"></em>',"<%}%>","</span>","</a>","<a"+at+'"reply"'+_s+'"reply"'+$s+'"channel='+ct("channel")+"&allNewsid="+ct("allNewsid")+"&newsid="+ct("newsid")+"&mid="+ct("mid")+"&uid="+ct("uid")+"&nick="+ct("nick")+"&parent="+ct("parent")+"&thread="+ct("thread")+"&userLnk="+ct("oUserLnk")+"&cont="+ct("oCont")+'" href="javascript:;" hidefocus data-sudaclick="comment_reply_i">'+getMsg("I009")+"</a>","</span>","<%}%>","</div>","</div>","\x3c!-- 内容 end --\x3e"].join(""),floor:["\x3c!-- 头像 start --\x3e","<div"+at+'"head">'+ct("userFace")+"</div>","\x3c!-- 头像 end --\x3e","\x3c!-- 内容 start --\x3e","<div"+at+'"cont"'+bt+'"itemCont">',"<div"+at+'"info">',"<span"+at+'"num">'+ct("floor")+"</span>","<span"+at+'"name '+ct("icoClz")+'">'+ct("userLnk")+"</span>","<span"+at+'"area">'+ct("area")+"</span>","</div>","<div"+at+'"txt">'+ct("cont")+"</div>","<div"+at+'"action">'+ct("time")+"<span"+at+'"btns">',"<a"+at+'"vote" title="'+getMsg("I008")+'"'+_s+'"vote"'+$s+'"channel='+ct("channel")+"&newsid="+ct("newsid")+"&mid="+ct("mid")+'" href="javascript:;">',"<span>",getMsg("I008"),"<% if(parseInt(this.agree)) {%>","<em "+bt+'"voteNum">'+ct("agree")+"</em>","<% }else{ %>","<em "+bt+'"voteNum"></em>',"<%}%>","</span>","</a>","<a"+at+'"reply"'+_s+'"reply"'+$s+'"channel='+ct("channel")+"&allNewsid="+ct("allNewsid")+"&newsid="+ct("newsid")+"&mid="+ct("mid")+'" href="javascript:;" hidefocus>回复</a>',"</span>","</div>","</div>"].join(""),dialogItem:["\x3c!-- 内容 start --\x3e","<div"+at+'"cont"'+bt+'"itemCont">',"<div"+at+'"txt"><span'+at+'"name '+ct("icoClz")+'">'+ct("userLnk")+"</span>"+ct("lastUserLnk")+ct("cont")+"</div>","<div"+at+'"action">'+ct("time"),"<% if(this.mid) {%>",'<a class="report" href="feedback_jb.html-mid='+ct("/*tpa=http://comment5.news.sina.com.cn/comment/skin/feedback_jb.html?mid='+ct(*/mid")+'" target="_blank" data-sudaclick="comment_report_i">'+getMsg("I043")+"</a>","<span"+at+'"btns">',"<% if(this.isAgreed) {%>","<a"+at+'"vote vote-active" title="'+getMsg("I008d")+'"'+_s+'"vote"'+$s+'"channel='+ct("channel")+"&newsid="+ct("newsid")+"&nick="+ct("nick")+"&uid="+ct("uid")+"&mid="+ct("mid")+"&parent="+ct("parent")+"&thread="+ct("thread")+"&floor="+ct("floor")+'" href="javascript:;" data-sudaclick="comment_like_i" voted="true"><span>'+getMsg("I008d"),"<% }else{ %>","<a"+at+'"vote" title="'+getMsg("I008")+'"'+_s+'"vote"'+$s+'"channel='+ct("channel")+"&newsid="+ct("newsid")+"&nick="+ct("nick")+"&uid="+ct("uid")+"&mid="+ct("mid")+"&parent="+ct("parent")+"&thread="+ct("thread")+"&floor="+ct("floor")+'" href="javascript:;" data-sudaclick="comment_like_i"><span>'+getMsg("I008"),"<%}%>","<% if(parseInt(this.agree)) {%>","<em "+bt+'"voteNum">'+ct("agree")+"</em>","<% }else{ %>","<em "+bt+'"voteNum"></em>',"<%}%>","</span>","</a>","<a"+at+'"reply"'+_s+'"reply"'+$s+'"channel='+ct("channel")+"&allNewsid="+ct("allNewsid")+"&newsid="+ct("newsid")+"&mid="+ct("mid")+"&uid="+ct("uid")+"&nick="+ct("nick")+"&parent="+ct("parent")+"&thread="+ct("thread")+"&pos=dialog&floor="+ct("floor")+'" href="javascript:;" hidefocus data-sudaclick="comment_reply_i">回复</a>',"</span>","<%}%>","</div>","</div>"].join(""),comment:["<div "+at+'"hd clearfix">',"<span"+bt+'"count" href="#url"'+at+'"count"></span>',"<span"+at+'"wrap-title">'+getMsg("I038")+"</span>","</div>","<div"+at+'"bd">',"<div"+at+'"editor">',"<div"+at+'"inner">',"<textarea"+bt+'"cont"'+at+'"box"  autocomplete="off" placeholder="'+ct("postTip")+'" value="'+ct("content")+'" action-type="cmnt-box">'+ct("content")+"</textarea>","</div>","</div>","\x3c!-- 用户头像 start --\x3e","<div"+at+'"head user-head" comment-type="head">',ct("face"),"</div>","<div"+at+'"head user-head-default">','<a href="index-45.htm"/*tpa=https://weibo.com/*/ target="_blank"><img src="male_180-1.png"/*tpa=http://img.t.sinajs.cn/t5/style/images/face/male_180.png*/></a>',"</div>","\x3c!-- 用户头像 end --\x3e","</div>","<div"+at+'"ft clearfix">',"<div"+at+'"face">','<a href="javascript:;"'+at+'"trigger"'+_s+'"face-toggle" data-sudaclick="comment_emoticons_i">表情</a>',"</div>","<div"+at+'"right-actions clearfix">',"\x3c!-- 登录与注册 start --\x3e","<div"+at+'"login">',"<a"+_s+'"login"'+at+'"login-lnk" href="javascript:;" title="'+getMsg("I029")+'" data-sudaclick="comment_login_i">'+getMsg("I029")+'</a><span class="sep">|</span><a'+at+'"register-lnk" target="_blank" href="signup.php"/*tpa=https://login.sina.com.cn/signup/signup.php*/ data-sudaclick="comment_registered_i">'+getMsg("I012")+"</a>","</div>","\x3c!-- 登录与注册前 end --\x3e","<div"+at+'"login-info clearfix">',"<span"+at+'"name"'+bt+'"name">',ct("name"),"</span>",'<span class="sep">|</span>',"<a"+bt+'"logout"'+at+'"logout" href="javascript:;" data-sudaclick="comment_signout_i" title="'+getMsg("I030")+'">'+getMsg("I030")+"</a>","</div>","<div"+bt+'"weibo"'+at+'"weibo sina-comment-chkbox"'+_s+'"checkbox-toggle"> <i></i>',"<span>"+getMsg("I018")+"</span>","</div>","\x3c!-- 发布 start --\x3e","<a"+bt+'"submit" '+_s+'"tip-toggle"'+at+'"comment btn  btn-disabled" href="javascript:;" target="_self" data-sudaclick="comment_submit_i">'+getMsg("I007")+"</a>","\x3c!-- 发布 end --\x3e","</div>","</div>"].join(""),reply:["<div"+at+'"sina-comment-form reply-form"'+bt+'"form">','<div class="hd"'+bt+'"hd"></div>','<div class="bd">',"<div"+at+'"editor">',"<div"+at+'"inner">',"<textarea"+bt+'"cont"'+at+'"box"  autocomplete="off" placeholder="'+ct("postTip")+'" value="'+ct("content")+'" action-type="cmnt-box">'+ct("content")+"</textarea>","<span"+at+'"arrow"></span>',"</div>","</div>","</div>","<div"+at+'"ft clearfix">',"<div"+at+'"face">','<a href="javascript:;"'+at+'"trigger"'+_s+'"face-toggle" data-sudaclick="comment_emoticons_i">表情</a>',"</div>","<div"+at+'"right-actions clearfix">',"\x3c!-- 登录与注册 start --\x3e","<div"+at+'"login">',"<a"+_s+'"login"'+at+'"login-lnk" href="javascript:;" data-sudaclick="comment_login_i" title="'+getMsg("I029")+'">'+getMsg("I029")+'</a><span class="sep">|</span><a'+at+'"register-lnk" target="_blank" href="signup.php"/*tpa=https://login.sina.com.cn/signup/signup.php*/ data-sudaclick="comment_registered_i">'+getMsg("I012")+"</a>","</div>","\x3c!-- 登录与注册 end --\x3e","<div"+bt+'"weibo"'+at+'"weibo sina-comment-chkbox"'+_s+'"checkbox-toggle"> <i></i>',"<span>"+getMsg("I018")+"</span>","</div>","<a"+bt+'"submit" '+_s+'"tip-toggle"'+at+'"comment btn  btn-disabled" href="javascript:;" target="_self" data-sudaclick="comment_submit_i">'+getMsg("I007")+"</a>","</div>","</div>","</div>"].join(""),share:"#精彩评论#【"+ct("title")+"】"+ct("name")+"："+ct("content"),popup:['<div class="sina-comment-popup sina-comment-popup-'+ct("skin")+'" style="display:none;">',"<% if(this.head) {%>",'<div class="popup-hd">'+ct("head")+"</div>","<%}%>",'<div class="popup-bd">'+ct("body")+"</div>",'<div class="popup-ft">','<% if(this.type === "confirm") {%>','<span class="popup-btn btn-action" popup-type="action">'+ct("actionText")+"</span>","<%}%>",'<span class="popup-btn btn-cancel" popup-type="cancel">'+ct("cancelText")+"</span>","</div></div>"].join("")}}function dw(){var e=$.create("div");return e.className="sina-comment-list-layer",e.style.visibility="hidden",$.byTag("body")[0].appendChild(e),e}function _A(e){return e.getAttribute("placeholder")||e.placeholder||""}function aB(e){var t=e.data;"loginWithComment"===t.action&&"function"==typeof t.callback&&t.callback()}return cmnt.config={encoding:"utf-8",fixFace:!1,comment:{}},cmnt.data=(Xn={},Yn=$.isArray,Zn=$.extend,{set:function(e,t,n){var a,i,o;if(void 0===Xn[e]&&(Xn[e]={}),void 0===Xn[e][t]&&(Xn[e][t]={}),a=Xn[e][t],Yn(n))for(var s=0,r=n.length;s<r;s++)(o=(i=n[s]).mid||i.newsid)&&(a[o]=i);else Zn(a,n)},get:function(e,t,n){return e?t?n?Xn[e][t][n]:Xn[e][t]:Xn[e]:Xn}}),cmnt.face=function(){var n,o="",s="",a=null;d(function(e){p(a=e)});var t,i="//www.sinaimg.cn/dy/deco/2012/1217/face/",c="//img.t.sinajs.cn/t35/style/images/common/face/ext/normal/",r={"哈哈":"haha","偷笑":"tx","泪":"lei","嘻嘻":"xixi","爱你":"aini","挖鼻屎":"wbs","心":"xin"},l={"国旗":"dc/flag_thumb","走你":"ed/zouni_thumb","笑哈哈":"32/lxhwahaha_thumb","江南style":"67/gangnamstyle_thumb","吐血":"8c/lxhtuxue_thumb","好激动":"ae/lxhjidong_thumb","lt切克闹":"73/ltqiekenao_thumb","moc转发":"cb/moczhuanfa_thumb","ala蹦":"b7/alabeng_thumb","gst耐你":"1b/gstnaini_thumb","xb压力":"e0/xbyali_thumb","din推撞":"dd/dintuizhuang_thumb","草泥马":"7a/shenshou_thumb","神马":"60/horse2_thumb","浮云":"bc/fuyun_thumb","给力":"c9/geili_thumb","围观":"f2/wg_thumb","威武":"70/vw_thumb","熊猫":"6e/panda_thumb","兔子":"81/rabbit_thumb","奥特曼":"bc/otm_thumb","囧":"15/j_thumb","互粉":"89/hufen_thumb","礼物":"c4/liwu_thumb","呵呵":"ac/smilea_thumb","嘻嘻":"0b/tootha_thumb","哈哈":"6a/laugh","可爱":"14/tza_thumb","可怜":"af/kl_thumb","挖鼻屎":"a0/kbsa_thumb","吃惊":"f4/cj_thumb","害羞":"6e/shamea_thumb","挤眼":"c3/zy_thumb","闭嘴":"29/bz_thumb","鄙视":"71/bs2_thumb","爱你":"6d/lovea_thumb","泪":"9d/sada_thumb","偷笑":"19/heia_thumb","亲亲":"8f/qq_thumb","生病":"b6/sb_thumb","太开心":"58/mb_thumb","懒得理你":"17/ldln_thumb","右哼哼":"98/yhh_thumb","左哼哼":"6d/zhh_thumb","嘘":"a6/x_thumb","衰":"af/cry","委屈":"73/wq_thumb","吐":"9e/t_thumb","打哈欠":"f3/k_thumb","抱抱":"27/bba_thumb","怒":"7c/angrya_thumb","疑问":"5c/yw_thumb","馋嘴":"a5/cza_thumb","拜拜":"70/88_thumb","思考":"e9/sk_thumb","汗":"24/sweata_thumb","困":"7f/sleepya_thumb","睡觉":"6b/sleepa_thumb","钱":"90/money_thumb","失望":"0c/sw_thumb","酷":"40/cool_thumb","花心":"8c/hsa_thumb","哼":"49/hatea_thumb","鼓掌":"36/gza_thumb","晕":"d9/dizzya_thumb","悲伤":"1a/bs_thumb","抓狂":"62/crazya_thumb","黑线":"91/h_thumb","阴险":"6d/yx_thumb","怒骂":"89/nm_thumb","心":"40/hearta_thumb","伤心":"ea/unheart","猪头":"58/pig",ok:"d6/ok_thumb","耶":"d9/ye_thumb",good:"d8/good_thumb","不要":"c7/no_thumb","赞":"d0/z2_thumb","来":"40/come_thumb","弱":"d8/sad_thumb","蜡烛":"91/lazu_thumb","蛋糕":"6a/cake","钟":"d3/clock_thumb","话筒":"1b/m_thumb"},m={iniTarget:null,srcInput:null,iconLayer:null,iconText:"",isShow:!1,callback:function(){}};function u(e){if(m.isShow&&e){var t=e.target||e.srcElement;t===m.iniTarget||$.contains(m.iconLayer,t)||m.hide()}}function d(e){e([{url:"https://comment.sinaimg.cn/emoji/default/face_sina_1.png",phrase:"[→_→]",file_name:"face_sina_1",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_2.png",phrase:"[呵呵]",file_name:"face_sina_2",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_3.png",phrase:"[嘻嘻]",file_name:"face_sina_3",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_4.png",phrase:"[哈哈]",file_name:"face_sina_4",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_5.png",phrase:"[爱你]",file_name:"face_sina_5",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_6.png",phrase:"[挖鼻屎]",file_name:"face_sina_6",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_7.png",phrase:"[吃惊]",file_name:"face_sina_7",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_8.png",phrase:"[晕]",file_name:"face_sina_8",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_9.png",phrase:"[泪]",file_name:"face_sina_9",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_10.png",phrase:"[馋嘴]",file_name:"face_sina_10",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_11.png",phrase:"[抓狂]",file_name:"face_sina_11",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_12.png",phrase:"[哼]",file_name:"face_sina_12",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_13.png",phrase:"[可爱]",file_name:"face_sina_13",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_14.png",phrase:"[怒]",file_name:"face_sina_14",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_15.png",phrase:"[汗]",file_name:"face_sina_15",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_16.png",phrase:"[害羞]",file_name:"face_sina_16",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_17.png",phrase:"[睡觉]",file_name:"face_sina_17",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_18.png",phrase:"[钱]",file_name:"face_sina_18",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_19.png",phrase:"[偷笑]",file_name:"face_sina_19",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_20.png",phrase:"[笑cry]",file_name:"face_sina_20",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_21.png",phrase:"[doge]",file_name:"face_sina_21",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_22.png",phrase:"[喵喵]",file_name:"face_sina_22",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_23.png",phrase:"[酷]",file_name:"face_sina_23",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_24.png",phrase:"[衰]",file_name:"face_sina_24",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_25.png",phrase:"[闭嘴]",file_name:"face_sina_25",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_26.png",phrase:"[鄙视]",file_name:"face_sina_26",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_27.png",phrase:"[花心]",file_name:"face_sina_27",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_28.png",phrase:"[鼓掌]",file_name:"face_sina_28",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_29.png",phrase:"[悲伤]",file_name:"face_sina_29",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_30.png",phrase:"[思考]",file_name:"face_sina_30",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_31.png",phrase:"[生病]",file_name:"face_sina_31",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_32.png",phrase:"[亲亲]",file_name:"face_sina_32",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_33.png",phrase:"[怒骂]",file_name:"face_sina_33",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_34.png",phrase:"[太开心]",file_name:"face_sina_34",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_35.png",phrase:"[懒得理你]",file_name:"face_sina_35",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_36.png",phrase:"[右哼哼]",file_name:"face_sina_36",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_37.png",phrase:"[左哼哼]",file_name:"face_sina_37",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_38.png",phrase:"[嘘]",file_name:"face_sina_38",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_39.png",phrase:"[委屈]",file_name:"face_sina_39",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_40.png",phrase:"[吐]",file_name:"face_sina_40",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_41.png",phrase:"[可怜]",file_name:"face_sina_41",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_42.png",phrase:"[打哈气]",file_name:"face_sina_42",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_43.png",phrase:"[挤眼]",file_name:"face_sina_43",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_44.png",phrase:"[失望]",file_name:"face_sina_44",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_45.png",phrase:"[顶]",file_name:"face_sina_45",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_46.png",phrase:"[疑问]",file_name:"face_sina_46",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_47.png",phrase:"[困]",file_name:"face_sina_47",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_48.png",phrase:"[感冒]",file_name:"face_sina_48",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_49.png",phrase:"[拜拜]",file_name:"face_sina_49",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_50.png",phrase:"[黑线]",file_name:"face_sina_50",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_51.png",phrase:"[阴险]",file_name:"face_sina_51",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_52.png",phrase:"[互粉]",file_name:"face_sina_52",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_53.png",phrase:"[心]",file_name:"face_sina_53",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_54.png",phrase:"[伤心]",file_name:"face_sina_54",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_55.png",phrase:"[猪头]",file_name:"face_sina_55",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_56.png",phrase:"[熊猫]",file_name:"face_sina_56",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_57.png",phrase:"[兔子]",file_name:"face_sina_57",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_58.png",phrase:"[握手]",file_name:"face_sina_58",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_59.png",phrase:"[作揖]",file_name:"face_sina_59",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_60.png",phrase:"[赞]",file_name:"face_sina_60",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_61.png",phrase:"[耶]",file_name:"face_sina_61",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_62.png",phrase:"[good]",file_name:"face_sina_62",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_63.png",phrase:"[弱]",file_name:"face_sina_63",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_64.png",phrase:"[不要]",file_name:"face_sina_64",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_65.png",phrase:"[ok]",file_name:"face_sina_65",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_66.png",phrase:"[haha]",file_name:"face_sina_66",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_67.png",phrase:"[来]",file_name:"face_sina_67",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_68.png",phrase:"[威武]",file_name:"face_sina_68",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_69.png",phrase:"[鲜花]",file_name:"face_sina_69",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_70.png",phrase:"[钟]",file_name:"face_sina_70",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_71.png",phrase:"[浮云]",file_name:"face_sina_71",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_72.png",phrase:"[飞机]",file_name:"face_sina_72",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_73.png",phrase:"[月亮]",file_name:"face_sina_73",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_74.png",phrase:"[太阳]",file_name:"face_sina_74",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_75.png",phrase:"[微风]",file_name:"face_sina_75",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_76.png",phrase:"[下雨]",file_name:"face_sina_76",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_77.png",phrase:"[给力]",file_name:"face_sina_77",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_78.png",phrase:"[神马]",file_name:"face_sina_78",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_79.png",phrase:"[围观]",file_name:"face_sina_79",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_80.png",phrase:"[话筒]",file_name:"face_sina_80",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_81.png",phrase:"[奥特曼]",file_name:"face_sina_81",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_82.png",phrase:"[草泥马]",file_name:"face_sina_82",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_83.png",phrase:"[萌]",file_name:"face_sina_83",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_84.png",phrase:"[囧]",file_name:"face_sina_84",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_85.png",phrase:"[织]",file_name:"face_sina_85",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_86.png",phrase:"[礼物]",file_name:"face_sina_86",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_87.png",phrase:"[喜]",file_name:"face_sina_87",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_88.png",phrase:"[围脖]",file_name:"face_sina_88",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_89.png",phrase:"[音乐]",file_name:"face_sina_89",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_90.png",phrase:"[绿丝带]",file_name:"face_sina_90",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_91.png",phrase:"[蛋糕]",file_name:"face_sina_91",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_92.png",phrase:"[蜡烛]",file_name:"face_sina_92",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_93.png",phrase:"[干杯]",file_name:"face_sina_93",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_94.png",phrase:"[男孩儿]",file_name:"face_sina_94",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_95.png",phrase:"[女孩儿]",file_name:"face_sina_95",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_96.png",phrase:"[肥皂]",file_name:"face_sina_96",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_97.png",phrase:"[照相机]",file_name:"face_sina_97",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_98.png",phrase:"[浪]",file_name:"face_sina_98",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_99.png",phrase:"[沙尘暴]",file_name:"face_sina_99",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_100.png",phrase:"[二哈]",file_name:"face_sina_100",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_101.png",phrase:"[抱抱]",file_name:"face_sina_101",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_102.png",phrase:"[摊手]",file_name:"face_sina_102",online:1}])}function p(e){for(var t,n="",a=[],i=0;i<e.length;i++)n+=i+"="+(t=e[i]).phrase+";",a.push($.template('<li action-type="face-insert" data-text="@@phrase@@" title="@@phrase@@"><img action-type="emoji-img" data-src="@@url@@" alt="@@phrase@@"></li>',t));o=n,s=a.join("")}return t=function(e){p(a=e)},$.getJsonp("https://comment.sina.com.cn/meme",{success:function(e){try{!e.result.status.code&&e.result.data.default.meme.length?t(e.result.data.default.meme):(console.log(e.result.status.msg),d(t))}catch(e){console.log(e),d(t)}}}),m.show=function(e,t,n,a,i,o){var s,r=m.iconLayer;return r&&u(),m.wrap=m.wrap||null,cmnt.config.fixFace&&(n=getPar(e,"form")),r&&m.wrap===n||(r=function(e,t,n,a){t=t||"360px",n=n||{};var i=[];for(var o in n)i.push('<li><a href="javascript:void(0)" action-type="face-insert"action-data="text=['+o+']" title="'+o+'"><img src="'+a+n[o]+'.gif" alt="'+o+'" /></a></li>');var s=[];s.push('<table class="sina-comment-layer">'),s.push('<tbody><tr> <td class="a-l-top-l"></td> <td class="a-l-top-c"></td> <td class="a-l-top-r"></td> </tr> <tr> <td class="a-l-m-l"></td> <td class="a-l-m-c"><div class="a-l-box">'),s.push('<div class="a-l-box-con" style="'+t+'">'),s.push('<div class="sina-comment-face-list clearfix">'),s.push('<div class="a-l-arrow"></div>'),s.push('<div class="a-l-close-wrap">'),s.push('<a action-type="face-close" class="a-l-close" href="javascript:;" title="关闭"></a>'),s.push("</div>"),s.push('<div class="face-list-items">'),s.push("<ul>"),s.push(i.join("")),s.push("</ul>"),s.push("</div>"),s.push("</div>"),s.push("</div>"),s.push('</div></td><td class="a-l-m-r"></td></tr><tr><td class="a-l-btm-l"></td> <td class="a-l-btm-c"></td><td class="a-l-btm-r"></td></tr></tbody></table>');var r=$.create("div");return r.innerHTML=s.join(""),r.style.display="none",(e||document.body).appendChild(r),r}(n,o,l,c),m.wrap=n),n&&n!==document.body?s={top:e.offsetTop+e.offsetHeight,left:e.offsetLeft}:(s=$.getPosition(e)).top+=e.offsetHeight,$.ua.isIE&&(s.left+=-10),isNaN(a)||(s.left+=a),isNaN(i)||(s.top+=+i),r.style.cssText="left:"+s.left+"px;top:"+s.top+'px;position:absolute;z-index:1700;display:"";zoom:1;',r.className="sina-comment-layer-wrap",m.iconLayer=r,m.iniTarget=e,m.srcInput=t,m.iconText=null,m.isShow=!0,$.addClass(e,"trigger-active"),$.addEvent(document.body,"click",u,!1),m.iconLayer},m.show_menu=function(e){if(!$.hasClass(e,"trigger-active")){var t=m.iconLayer;return t||(t=m.iconLayer=function(){var e=document.createElement("ul");e.className="emoji-list clearfix",e.setAttribute("action-type","emoji-list"),e.innerHTML=s.replace(/data-src/g,"src");var t=document.createElement("a");t.className="emoji-panel-close",t.href="javascript:;",t.setAttribute("action-type","face-close");var n=document.createElement("div");return n.className="emoji-panel",n.setAttribute("action-type","emoji-panel"),n.setAttribute("data-sudaclick","comment_emoticons_i"),n.appendChild(t),n.appendChild(e),n}(),$.addEvent(document.body,"click",function(e){var t=e.target.getAttribute("action-type");t&&t.match(/(?:emoji-panel)|(?:emoji-list)|(?:face-insert)|(?:emoji-img)|(?:face-toggle)/g)||m.hide_menu()})),e!==n&&(n&&(n.parentNode.removeChild(t),$.removeClass(n,"trigger-active")),e.parentNode.appendChild(t),n=e),$.addClass(e,"trigger-active"),t.style.display="block",m.iniTarget=e,m.srcInput=function e(t){var n=t.parentNode;return n&&"form"===n.getAttribute("comment-type")?n.getElementsByTagName("textarea")[0]:e(n)}(e),m.iconText=null,m.isShow=!0,m.iconLayer}},m.hide_menu=function(){if(n){if(!$.hasClass(n,"trigger-active"))return;$.removeClass(n,"trigger-active")}var e=m.iconLayer;return e&&(e.style.display="none"),e},m.hide=function(){var e=m.iconLayer;return e&&(e.style.display="none"),m.iniTarget&&$.removeClass(m.iniTarget,"trigger-active"),$.removeEvent(document.body,"click",u),m.isShow=!1,e},m.getFace=function(){return m.iconText},m.insert=function(a,i){var o=m.srcInput;a&&o&&(o.focus(),setTimeout(function(){var e=o.getAttribute("range");if(null==e)!function(e,t){if($.ua.isIE){var n=e.createTextRange();if(n.collapse(!0),e.caretPos){var a=e.caretPos;a.text=" "==a.text.charAt(a.text.length-1)?t+" ":t,n.moveStart("character",e.value.indexOf(t)+1),n.moveEnd("character",t.length-2)}else{var i=doc.selection.createRange();doc.selection.empty(),i.text=t}}else if(e.setSelectionRange){var o=e.selectionStart,s=e.selectionEnd,r=e.value.substring(0,o),c=e.value.substring(s),l=r+t,m=l.length;e.value=l+c,e.setSelectionRange(m,m)}else e.value+=t}(o,a);else{var t=e.split("&");$.app.textareaUtils.unCoverInsertText(o,a,{rcs:t[0],rccl:t[1]});var n=$.app.textareaUtils.getCursorPos(o,a);o.setAttribute("range",n+"&0")}i&&i()},10))},m.set=function(e,t,n){"all"===e?(c=t,l=n):(i=t,r=n)},m.get=function(e){return"all"===e?{faces:l,base:c}:{faces:r,base:i}},m.filter=function(e){return e=(e=e||"").replace(/\[[^\[\]]+\]/g,function(e){var t=function(e){e=e.replace("[","\\[").replace("]","\\]");var t=new RegExp("(\\d+)="+e+";","g").exec(o);return t?a[t[1]].url:null}(e),n=e;return t&&(n='<img class="txt-emoji" title="'+e+'" alt="'+e+'" src="'+t+'" />'),n})},m}(),cmnt.commentTip=(Tp=document.body,Up={timeout:null,transition:null},Up.show=function(e,t,n,a){a=a||0,Up.dom=Up.dom||Vp(),Up.dom.style.display="block",Up.timeout&&clearTimeout(Up.timeout),Up.dom.innerHTML='<div class="inner '+t+'"><i></i><div class="txt">'+n+"</div></div>",Up.dom.style.marginLeft=-Up.dom.offsetWidth/2+"px",a&&(Up.timeout=setTimeout(function(){Up.hide()},a)),$.addClass(Up.dom,"show")},Up.hide=function(){Up.dom=Up.dom||Vp(),Up.timeout&&clearTimeout(Up.timeout),$.removeClass(Up.dom,"show"),Up.transition?(clearTimeout(Up.transition),Up.dom.style.display="none"):Up.transition=setTimeout(function(){Up.dom.style.display="none"},300)},Up),cmnt.truncate=(bq=!1,eq=function(e,t){var n,a=e.cloneNode(!0);a.setAttribute("comment-type",""),a.className+=" truncated",a.innerHTML&&(a.innerHTML=""),document.createDocumentFragment().innerHTML="";for(var i=e.childNodes,o=0,s=i.length;o<s;o++){var r=i[o],c=t-gq(a).length;if(0==c)return a;(n=dq(r,c))&&("string"==typeof n&&(n=document.createTextNode(n)),a.appendChild(n))}return a},fq=function(e,t){var n=jq(e.data);return bq&&(n=n.replace(/^ /,"")),bq=!!n.match(/ $/),function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}(n=n.slice(0,t))},gq=function(e){if(e.innerText)return e.innerText;var t="";e=e.childNodes||e;for(var n=0;n<e.length;n++)t+=1!==e[n].nodeType?e[n].nodeValue:gq(e[n].childNodes);return t},jq=function(e){return e.replace(/\s+/g," ")},{handle:function(e,t){if(!(function(e){return e.replace(/(^[\s\u3000]*)|([\s\u3000]*$)/g,"")}(jq(gq(e))).length<=t||e.__truncated__)){e.__truncated__=!0;var n=t-5;n=Math.max(n,0);var a=dq(e,n);$.addClass(e,"txt-fullText"),e.style.display="none",$.insertAfter(a,e),iq(e,"收起全部","txt-less txt-toggle","less"),iq(a,"...展开全部","txt-more txt-toggle","more")}},toggle:function(e,t){var n=$.byClass("txt",e.parentNode.parentNode);"more"===t?(n[1].style.display="none",n[0].style.display=""):(n[1].style.display="",n[0].style.display="none")}}),cmnt.vote=function(e){var t=$.extend({channel:"",newsid:"",parent:"",vote:1,callback:function(e){},domain:"sina.com-39.cn"/*tpa=http://finance.sina.com.cn/other/src/sina.com.cn*/},e);$.ijax.request("//comment.sina.com.cn/cmnt/vote",{POST:t})},cmnt.voteTip=(Wq={timeout:null,animate:null},Wq.show=function(e,t){Wq.dom||(Wq.dom=Xq()),clearTimeout(Wq.timeout),Wq.animate&&Wq.animate.pause();var n=$.getPosition(e),a=Zq(Wq.dom,100,30),i=Zq(e,100,40);$.setStyle(Wq.dom,{top:n.top+"px",left:n.left+i.width/2-a.width/2+"px",opacity:0,display:"block"}),(t=t||0)&&(Wq.timeout=setTimeout(function(){Wq.hide()},t)),$.animate(Wq.dom,{top:n.top-35+"px",opacity:1},200,"Tween.Quad.easeIn",{start:function(e){},complete:function(e){}})},Wq.hide=function(){Wq.dom||(Wq.dom=Xq()),clearTimeout(Wq.timeout),Wq.animate&&Wq.animate.pause(),$.animate(Wq.dom,{opacity:0},200,"Tween.Quad.easeOut",{start:function(e){},complete:function(e){$.setStyle(Wq.dom,{left:"-9999px",opacity:0,display:"none"})}})},Wq),cmnt.shareTip=function(){var encode=encodeURIComponent,getShareName=function(e){var t=function(e){if(typeof e.config==UNDEFINED)return"";var t=e.config.match(/wb_screen_name=([^&]*)/i);return t?t[1]:""}(e),n="",a=e.nick,i=e.usertype;return t?n="@"+t:"wap"==i?(n="新浪手机用户","手机用户"!=a&&(n+=a)):(n="新浪网友",a&&(n+=a)),n},getShareContent=function(e,t,n){var a={title:e=e.replace(/<.*?>/gi,""),name:t,content:n},i=$.cmnt.tpls.get("share");return e=appTemplate(i,a),encode(e)},getUrlData=function(data,newWin){var site=data.site,mid=data.mid,sinaAppkey=data.sinaAppkey||"",tencentAppkey=data.tencentAppkey||"",curCmntlist=cmnt.data.get(data.allNewsid,"cmntlist",mid),content=curCmntlist.content,newsid=curCmntlist.newsid,channel=curCmntlist.channel,img="",setWinUrl=function(){var e,t=location.href,n=getShareName(curCmntlist),a=typeof(e=cmnt.data.get(data.allNewsid,"newsdict",newsid))==UNDEFINED&&curCmntlist.news_info?curCmntlist.news_info:e;t=a.url||t;var i=getShareContent(a.title||"",n,content),o={sina:{base:"share-1.php-"/*tpa=http://v.t.sina.com.cn/share/share.php?*/,param:["url=",encode(t),"&title=",i,"&source=",encode("新浪新闻评论"),"&sourceUrl=",encode("index-64.htm"/*tpa=http://news.sina.com.cn/hotnews/*/),"&content=","gb2312","&pic=",encode(img),"&appkey=",sinaAppkey||"445563689"].join("")},tencent:{base:"index-1.php-"/*tpa=http://share.v.t.qq.com/index.php?*/,param:["c=","share","&a=","index","&url=",encode(t),"&title=",i,"&content=","gb2312","&pic=",encode(img),"&appkey=",tencentAppkey||"dcba10cb2d574a48a16f24c9b6af610c","&assname=","${RALATEUID}"].join("")}};newWin&&(newWin.location.href=[o[site].base,o[site].param].join(""))},getImgSrc=function(o){var cbName="iJax"+Date.parse(new Date),url="//comment.sina.com.cn/image";try{doc.domain="sina.com-39.cn"/*tpa=http://finance.sina.com.cn/other/src/sina.com.cn*/}catch(e){}window[cbName]=function(m){"string"==typeof m&&(m=eval("("+m+")"));var cmntImg=m.result.image||"";img=img?img+"||"+cmntImg:cmntImg,/Firefox/.test(navigator.userAgent)?setTimeout(function(){setWinUrl()},30):setWinUrl()};var param="";if($.ua.isFF){param="channel="+channel+"&newsid="+newsid+"&mid="+mid+"&version=1";var Sender=new $.html5Ijax({proxyUrl:"postmsg-2.html"/*tpa=http://comment5.news.sina.com.cn/comment/postmsg.html*/});Sender.send({url:url,data:param,onsuccess:window[cbName],onfailure:function(){}})}else param={channel:channel,newsid:newsid,mid:mid,version:"1",format:"js",callback:cbName},$.ijax.request(url,{POST:param})},maxCmntLen=80;data.hasReply||$.byteLength(content)>2*maxCmntLen?(content=$.strLeft(content,2*maxCmntLen),getImgSrc()):setWinUrl()},Tip={timeout:null,animate:null,trigger:null},getTip=function(e){var t=$.jsonToQuery(e);Tip.dom||(Tip.dom=$.create("div"),Tip.dom.className="sina-comment-share",Tip.dom.style.display="none",Tip.dom.style.position="absolute",$.byTag("body")[0].appendChild(Tip.dom),$.addEvent(Tip.dom,"mouseover",function(){clearTimeout(Tip.timeout)}),$.addEvent(Tip.dom,"mouseout",function(){Tip.hide(2e3)}),$.delegatedEvent(Tip.dom).add("share","click",function(e){var t=e.data,n=window.open("","mb",["toolbar=0,status=0,resizable=1,width=440,height=430,left=",(screen.width-440)/2,",top=",(screen.height-430)/2].join(""));getUrlData(t,n)}));Tip.dom.innerHTML='<a title="'+getMsg("I020")+'" class="sina-comment-share-sina" href="javascript:;" action-type="share" action-data="'+t+'&site=sina">新浪</a><a title="'+getMsg("I021")+'" class="sina-comment-share-qq" href="javascript:;" action-type="share" action-data="'+t+'&site=tencent">腾讯</a>'},hide=function(e){clearTimeout(Tip.timeout),Tip.animate&&Tip.animate.pause(),(e=e||0)&&(Tip.timeout=setTimeout(function(){$.animate(Tip.dom,{opacity:0},200,"Tween.Quad.easeOut",{start:function(e){},complete:function(e){$.setStyle(Tip.dom,{left:"-9999px",opacity:0,display:"none"}),$.removeClass(Tip.trigger,"share-active"),Tip.trigger=null}})},e))},getWH=function(e,t,n){var a=$.getOuterStyle(e,"width"),i=$.getOuterStyle(e,"height");return a=parseFloat(a),a=isNaN(a)?t:a,i=parseFloat(i),{width:a,height:i=isNaN(i)?n:i}},show=function(e,t,n){if(Tip.trigger!=e){getTip(t),clearTimeout(Tip.timeout),Tip.animate&&Tip.animate.pause();var a=$.getPosition(e),i=getWH(Tip.dom,100,30),o=getWH(e,100,40);$.removeClass(Tip.trigger,"share-active"),Tip.trigger=e,$.setStyle(Tip.dom,{top:a.top+"px",left:a.left+o.width/2-i.width/2+"px",opacity:0,display:"block"}),Tip.hide(n),$.animate(Tip.dom,{top:a.top-37+"px",opacity:1},200,"Tween.Quad.easeIn",{start:function(e){$.addClass(Tip.trigger,"share-active")},complete:function(e){}})}};return Tip.show=show,Tip.hide=hide,Tip}(),cmnt.comment=function(e,t,n){var a=cmnt.config.comment,i=$.extend({channel:"",newsid:"",parent:"",content:"",format:"json",ie:cmnt.config.encoding||"utf-8",oe:cmnt.config.encoding||"utf-8",ispost:0,share_url:location.href.split("#")[0],video_url:"",img_url:"",iframe:1},e);$.extend(i,a),"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:10.0.3) Gecko/20100101 Firefox/10.0.3"!=navigator.userAgent?$.app.post("//comment.sina.com.cn/cmnt/submit",i,function(e){t(e)},function(){n()}):uaTrack("cmntWarning","abnormal_FF1003")},cmnt.formateTime=function(e,t){var n=getMsg("I022"),a=getMsg("I023"),i=getMsg("I024"),o=getMsg("I025"),s=getMsg("I026"),r=e.getFullYear(),c=t.getFullYear(),l=e.getMonth()+1,m=t.getMonth()+1,u=e.getDate(),d=t.getDate(),p=e.getHours(),f=t.getHours();f<10&&(f="0"+f);var h=t.getMinutes();h<10&&(h="0"+h);var g=e-t;return g=0<g?g:0,g/=1e3,r!=c?c+"-"+m+"-"+d+" "+f+":"+h:l!=m||u!=d?m+n+d+a+f+":"+h:p!=f&&3600<g?i+f+":"+h:g<51?(g=g<1?1:g,Math.floor((g-1)/10)+1+"0"+o):Math.floor(g/60+1)+s},cmnt.updateTime=(Bs=cmnt.formateTime,function(t){var n,a=function(e){clearTimeout(n),n=setTimeout(function(){!function(e){var t,n=$.byAttr(e,"comment-type","time"),a=new Date;a.setTime(a.getTime()-0);for(var i=0;i<n.length;i++){var o=n[i],s=o.getAttribute("date");if(/^\s*\d+\s*$/.test(s)){var r=new Date;r.setTime(parseInt(s,10)),o.innerHTML=Bs(a,r),t===undefined&&(t=a.getTime()-r.getTime()<6e4)}}return t}(t)?a(6e4):a(1e3)},e)};a(1e3);var e={destroy:function(){clearTimeout(n),e=t=n=a=null}};return e}),cmnt.getTimeStr=(Ts=cmnt.formateTime,function(e,t){t=t||"time";var n="刚刚",a="";if(e){var i=new Date;e=e.replace(/-/g,"/"),a=Date.parse(e),i.setTime(parseInt(a,10));var o=new Date;o.setTime(o.getTime()),n=Ts(o,i)}else a=Date.parse(new Date);return'<span class="'+t+'" comment-type="time" date="'+a+'">'+n+"</span>"}),cmnt.tpls=($s=" action-data=",_s=" action-type=",at=" class=",bt=" comment-type=",dt=null,{set:function(e,t){(dt=dt||et())[e]=t},get:function(e){return dt=dt||et(),typeof e==UNDEFINED?dt:dt[e]}}),cmnt.popup=(jt=cmnt.tpls.get("popup"),kt=document.getElementsByTagName("body")[0],function(e){function t(){(n=document.createElement("div")).innerHTML=appTemplate(jt,a),n=n.firstElementChild,a.parentNode.appendChild(n),function(n,a,i){function e(e){var t=((e=e||window.event).target||e.srcElement).getAttribute("popup-type");if(t)switch(n.style.display="none",n.parentNode.removeChild(n),t){case"action":"function"==typeof a&&a();break;case"cancel":"function"==typeof i&&i()}}"addEventListener"in n?n.addEventListener("click",e,!1):"attachEvent"in n&&n.attachEvent("onclick",e)}(n,a.onAction,a.onCancel)}var n,a=$.extend({skin:"error",type:"confirm",head:null,body:"",actionText:"确定",cancelText:"取消",parentNode:kt,onAction:function(){},onCancel:function(){}},e);return{show:function(){n||t(),n.style.display="block",function(e,t){var n=$.getStyle(t,"position");"absolute"!==n&&"relative"!==n&&(t.style.position="relative"),e.style.marginLeft=-e.offsetWidth/2+"px"}(n,a.parentNode),n.style.opacity="1"},hide:function(){n&&(n.style.opacity="0",n.style.display="none")}}}),cmnt.getWBName=function(e){if(typeof e.config==UNDEFINED)return"";var t=e.config.match(/wb_screen_name=([^&]*)/i);return t?t[1]:""},cmnt.getWBV=function(e){if(typeof e.config==UNDEFINED)return"";var t="",n=$.queryToJson(e.config),a=n.wb_verified,i=n.wb_verified_type;return typeof a!=UNDEFINED&&"1"==a&&(t="0"==i?"y":"b"),t},cmnt.getUserLnk=function(e,t,n){t=t||"",n=n||"";var a="",i=cmnt.getWBV(e),o="新浪个人认证";i&&("b"===i&&(o="新浪机构认证"),a='<img src="//www.sinaimg.cn/dy/deco/2013/0608/v'+i+'.png" title="'+o+'" style="vertical-align: middle;" />');var s=cmnt.getWBName(e);return'<span class="sina-comment-user-lnk-wrap">'+(s?'<a target="_blank" href="'+e.uid+'"/*tpa=https://weibo.com/u/'+e.uid+'*/ title="'+s+'" data-sudaclick="comment_usernickname_p">'+t+s+a+n+"</a>":e.uid&&e.uid+""!="0"?'<a target="_blank" href="default.html-info_type=1&style=1&user_uid='+e.uid+'"/*tpa=http://comment5.news.sina.com.cn/comment/skin/default.html?info_type=1&style=1&user_uid='+e.uid+'*/ title="'+e.nick+'" data-sudaclick="comment_usernickname_p">'+t+e.nick+n+"</a>":t+e.nick+n)+"</span>"},cmnt.getUserFace=function(e){var t=e.config||"",n=$.queryToJson(t,!0).wb_profile_img||"sina_comment_defaultface-1.png"/*tpa=http://www.sinaimg.cn/dy/deco/2012/1018/sina_comment_defaultface.png*/;n=n.replace(/^http[s]?\:(?=\/\/)/,"");var a=cmnt.getWBName(e);return a?'<a href="'+e.uid+'"/*tpa=https://weibo.com/u/'+e.uid+'*/ title="'+a+'" target="_blank" data-sudaclick="comment_useravatar_p"><img src="'+n+'"/></a>':e.uid&&"0"!=e-1.uid-(n="/*tpa=http://finance.sina.com.cn/other/src/!=e.uid?(n=*///portrait5.sinaimg.cn/"+e.uid+"/blog/50",'<a target="_blank" href="default.html-info_type=1&style=1&user_uid='+e.uid+'"/*tpa=http://comment5.news.sina.com.cn/comment/skin/default.html?info_type=1&style=1&user_uid='+e.uid+'*/ title="'+e.nick+'" data-sudaclick="comment_useravatar_p"><img src="'+n+'"/></a>'):'<img src="'+n+'"/>'},cmnt.getUserIco=function(e){var t={wap:"name-mobile",wb:"name-weibo"},n=t[e.usertype];(n=n||"")||(n=cmnt.getWBName(e)?t.wb:"");return n},cmnt.getUserFromType=function(e){var t="",n={financeapp:{txt:"新浪财经APP",url:"//finance.sina.com.cn/mobile/comfinanceweb.shtml"}}[e.usertype];return n&&(t='<span class="user-from"><a class="user-from-link" href="'+n.url+'" target="_blank" data-sudaclick="sf_cjapp_userid_p">来自'+n.txt+"</a></span>"),t},cmnt.getUserAgreed=function(e){var t="",n=$.login.getInfo(),a=n.sina?n.sina.uid:"unlogin_user",i=$.messageStorage.get(a)?$.messageStorage.get(a):"";return("1"==e.is_agree||-1<i.indexOf(e.mid))&&(t=!0),t},cmnt.setVotedMid=function(e,t){var n=$.messageStorage.get(e);if(n){var a=n.split(",");a.length<100||a.pop(),a.push(t),$.messageStorage.set(e,a.join(","))}else $.messageStorage.set(e,t)},cmnt.getVotedMid=function(e){$.messageStorage.get(e)},cmnt.getReplyNameTmpl=function(e){var t,n,a=e.thread,i=e.parent,o=e.uid,s=e.parent_uid,r=e.nick,c=e.parent_nick,l='<span class="sina-comment-user-lnk-wrap">@@userLink@@</span>';return n=i===a?"":s?'<a href="'+s+'"/*tpa=https://weibo.com/u/'+s+'*/ title="'+c+'" target="_blank" data-sudaclick="comment_usernickname_p">@'+c+"：</a>":"@"+c+"：",{user:(t=o?'<a href="'+o+'"/*tpa=https://weibo.com/u/'+o+'*/ title="'+r+'" target="_blank" data-sudaclick="comment_usernickname_p">'+r+"：</a>":r+"：")?l.replace("@@userLink@@",t):"",lastUser:n?"回复"+l.replace("@@userLink@@",n):""}},cmnt.insertList=function(e,t,n){var a,i=0;e.firstChild&&"sina-comment-page"===e.firstChild.className?e.firstChild.insertBefore(t,e.firstChild.firstChild):e.appendChild(t),n&&setTimeout(function(){a=$.getPosition(e),i=a.top-80;try{doc.documentElement.scrollTop=i,document.body.scrollTop=i}catch(e){}},1e3)},cmnt.replyListRender=(Hu=cmnt.getTimeStr,Iu=$.app.splitNum,Ju=cmnt.data,function(e,t,n,a,i){a&&Ju.set(e,"cmntlist",n);var o="";if(n&&0<n.length)for(var s=0,r=n.length;s<r;s++){var c=n[s],l=c.area?c.area:"&nbsp;",m="";0!==s&&(m=1);var u="",d=cmnt.getUserLnk(c,i?"":"@"),p=$.cmnt.face.filter(app.cmntEncodeHtml(c.content));if(i){var f={allNewsid:e,channel:c.channel,newsid:c.newsid,mid:c.mid,floor:s+1,userIco:cmnt.getUserIco(c),userLnk:d,area:l,cont:p,time:Hu(c.time,"time"),agree:Iu(c.agree),hasReply:m};u=$.cmnt.tpls.get("floor"),o=o+'<div comment-type="floor" class="floor floor-out clearfix">'+appTemplate(u,f)+"</div>"}}return""!==o&&(o='<div class="floor-wrap flat-floor-wrap">'+o+"</div>"),o}),cmnt.getNewsLink=function(e,t){var n="",a="";t.newsdict&&typeof(n=t.newsdict[e])!=UNDEFINED&&(a='<p class="lnk"><a target="_blank" href="'+n.url+'" title="'+n.title+'">《'+n.title+"》</a></p>");return a},cmnt.itemInnerRender=(dv=cmnt.getTimeStr,ev=$.app.splitNum,function(e,t,n,a,i){if(typeof t.mid==UNDEFINED)return"";var o,s=t.newsid,r=t.mid,c=t.area?t.area:"&nbsp;";n.threaddict&&(o=n.threaddict[r]);var l=!!(a=a||o&&o.list),m=$.cmnt.face.filter(app.cmntEncodeHtml(t.content)),u=m+"",d={channel:t.channel,allNewsid:e,newsid:s,nick:t.nick,uid:t.uid,mid:t.mid,parent:t.parent,thread:t.thread,userFace:cmnt.getUserFace(t),newsLnk:cmnt.getNewsLink(s,n),userIco:cmnt.getUserIco(t),userLnk:cmnt.getUserLnk(t),oUserLnk:function(e){return e.replace(/<(?:.|\s)*?>/g,"")}(cmnt.getUserLnk(t)),area:c,reply:"",cont:m,contWithReply:u,oCont:$.encodeHTML(t.content),time:dv(t.time,"time"),agree:ev(t.agree),hasReply:l,userFrom:cmnt.getUserFromType(t),isAgreed:cmnt.getUserAgreed(t)},p="";return p=i&&i.showUserFrom?$.cmnt.tpls.get("contWithUserFrom"):$.cmnt.tpls.get("cont"),appTemplate(p,d)}),cmnt.itemRender=function(e,t,n,a){return'<div class="item clearfix" comment-type="item">'+cmnt.itemInnerRender(e,t,n,null,a)+"</div>"},cmnt.dialogInsertList=function(e,t){e.appendChild(t)},cmnt.dialogItemInnerRender=(Dv=cmnt.getTimeStr,Ev=$.app.splitNum,Fv=getMsg("I036"),Gv=getMsg("I037"),function(e,t,n,a){var i=t.area-t-1.area-"/*tpa=http://finance.sina.com.cn/other/src/),function(e,t,n,a){var i=t.area?t.area:*/&nbsp;",o="";0!==n&&(o=1);var s,r=cmnt.getUserLnk(t,"",Gv),c=$.cmnt.face.filter(app.cmntEncodeHtml(t.content)),l={allNewsid:e,channel:t.channel,newsid:t.newsid,nick:t.nick,uid:t.uid,mid:t.mid,parent:t.parent,thread:t.thread,userFace:cmnt.getUserFace(t),floor:n+1,userIco:cmnt.getUserIco(t),userLnk:r,lastUserLnk:a?appTemplate(Fv,{userLnk:a}):"",area:i,cont:c,time:Dv(t.time,"time"),agree:Ev(t.agree),hasReply:o,pos:"dialog"};return s=$.cmnt.tpls.get("dialogItem"),appTemplate(s,l)}),cmnt.dialogItemRender=function(e,t,n,a,i){return'<div class="item clearfix '+(i?"item-hide":"")+'" comment-type="item">'+cmnt.dialogItemInnerRender(e,t,n,a)+"</div>"},cmnt.getDialog=function(e){var t=e.mid;if(!t)return"";var n=e.allNewsid,a=cmnt.data.get(n),i=cmnt.data.get(n,"cmntlist",t);return cmnt.dialogListRender(n,i,a)},cmnt.layer=(cw={timeout:null,animate:null},cw.show=function(e,t,n){cw.dom||(cw.dom=dw()),clearTimeout(cw.timeout),cw.animate&&cw.animate.pause(),cw.dom.innerHTML='<div class="sina-comment-list-layer-hd"><h2>查看对话</h2><a action-type="layerHide" href="javascript:;" class="close"></a></div><div class="sina-comment-list-layer-bd">'+(t||"")+"</div>";var a=$.app.getWinSize(),i=function(e,t,n){var a=$.getStyle(e,"width"),i=$.getStyle(e,"height");return a=parseFloat(a),a=isNaN(a)?t:a,i=parseFloat(i),{width:a,height:i=isNaN(i)?n:i}}(cw.dom,648,380),o=document.body.scrollTop||document.documentElement.scrollTop;$.setStyle(cw.dom,{top:o+(a.height-i.height)/2+"px",left:"50%",marginLeft:-i.width/2+"px",opacity:0,visibility:"visible"}),(n=n||0)&&(cw.timeout=setTimeout(function(){cw.hide()},n)),$.animate(cw.dom,{opacity:1},200,"Tween.Quad.easeIn",{start:function(e){},complete:function(e){}})},cw.hide=function(){cw.dom||(cw.dom=dw()),clearTimeout(cw.timeout),cw.animate&&cw.animate.pause(),$.animate(cw.dom,{opacity:0},200,"Tween.Quad.easeOut",{start:function(e){},complete:function(e){$.setStyle(cw.dom,{left:"-9999px",opacity:0})}})},cw),cmnt.Dialog=(xw=$.createClass(),xw.include({init:function(e){var t=this;t.listOpt=e.listOpt,t.set("cfg",e),t.commentItem=getPar(e.trigger,"item"),t.actionData=e.actionData,t.allNewsId=t.actionData.allNewsid,t.commentData=e.commentData,t.commentMid=t.commentData.mid,t.replyData=e.replyData,t.showNum=t.listOpt.replyShowNum,t.maxNum=t.replyData.count,t.showedNum=0,t.page=0,t.totalPage=Math.ceil((t.maxNum-t.showNum)/t.listOpt.replyPageNum)+1,t.maxPage=t.listOpt.replyClickMoreTimes,t.wrap=document.createElement("div"),t.wrap.className="dialog-list-wrap",t.wrap.setAttribute("comment-type","dialogWrap"),t.listWrap=document.createElement("div"),t.listWrap.className="dialog-list",t.listWrap.setAttribute("comment-type","dialogList"),t.wrap.appendChild(t.listWrap),$.insertAfter(t.wrap,t.commentItem),t.dialogItemTmpl=$.cmnt.tpls.get("dialogItem"),t.load()},load:function(){var e=this;e.page+=1,1===e.page?(e.pageNum=e.listOpt.replyShowNum,e.replyList=e.replyData.list,e.onLoaded()):(e.pageNum=e.listOpt.replyPageNum,e.request())},onLoaded:function(){var e,t=this;t.render(),t.page<t.totalPage?t.showClickMore():t.hideClickMore(),e=cmnt.data.get(t.allNewsId,"replydict",t.commentMid),cmnt.data.set(t.allNewsid,"cmntlist",t.replyList),1!==t.page&&"concat"in e.list&&e.list.concat(t.replyList)},request:function(e){var n=this;if(!n.loading){n.loading=!0;var t=n.commentData,a=n.listOpt,i=t.mid;$.getJsonp("//comment.sina.com.cn/cmnt/info",{data:{channel:t.channel,newsid:n.allNewsId,mid:i,ie:a.encoding,oe:a.encoding,format:"json",page_size:a.replyPageNum,page:1,order:0,thread:1,last_mid:n.lastMid},success:function(e){var t=e.result;n.loading=!1,0!==t.status.code||t.error||(n.replyList=t.threaddict[i].list,n.onLoaded.call(n))}})}},showClickMore:function(){var e=this,t=e.listOpt;if(!e.clickMore){var n=document.createDocumentFragment(),a=document.createElement("div"),i=document.createElement("a");a.style.display="none",a.className="dialog-list-ft",i.className="more",i.setAttribute("data-sudaclick","comment_morereply_i"),a.appendChild(i),n.appendChild(a),e.clickMoreA=i,e.clickMore=a,e.bindClickMore(),e.wrap.appendChild(a)}e.page>e.maxPage?(e.clickMoreA.href="default.html-channel="/*tpa=http://comment5.news.sina.com.cn/comment/skin/default.html?channel=*/+t.channel+"&newsid="+t.newsid+"&group="+t.group,e.clickMoreA.target="_blank"):(e.clickMoreA.href="javascript:;",e.clickMoreA.removeAttribute("target")),e.clickMoreA.innerHTML="查看剩余<em>X</em>条回复".replace("X",e.maxNum-e.showedNum),e.clickMore.style.display="block"},bindClickMore:function(){var t=this;$.addEvent(t.clickMoreA,"click",function(e){t.page<=t.maxPage&&t.load()})},hideClickMore:function(){this.clickMore&&(this.clickMore.style.display="none")},render:function(){var e=this.replyList,t=e.length,n=document.createDocumentFragment();if(0<t){for(var a=0;a<t;a++)n.appendChild(this.itemRender(e[a]));this.lastMid=e[a-1].mid}this.listWrap.appendChild(n)},itemRender:function(e){var t,n,a;return this.commentData,a=this.getUserNameTmpl(e),t={allNewsid:e.newsid,channel:e.channel,newsid:e.newsid,nick:e.nick,uid:e.uid,mid:e.mid,parent:e.parent,thread:e.thread,floor:++this.showedNum,userIco:"name-weibo",userLnk:a.user,lastUserLnk:a.lastUser,area:e.area||"&nbsp;",cont:cmnt.face.filter(app.cmntEncodeHtml(e.content)),time:cmnt.getTimeStr(e.time,"time"),agree:e.agree?$.app.splitNum(e.agree):0,hasReply:0,pos:"dialog",isAgreed:cmnt.getUserAgreed(e)},(n=document.createElement("div")).className="item clearfix",n.setAttribute("comment-type","item"),n.innerHTML=appTemplate(this.dialogItemTmpl,t),n},getUserNameTmpl:function(e){var t,n,a=e.parent,i=e.uid,o=e.parent_uid,s=e.nick,r=e.parent_nick,c='<span class="sina-comment-user-lnk-wrap">@@userLink@@</span>';return t=i?'<a href="'+i+'"/*tpa=https://weibo.com/u/'+i+'*/ title="'+s+'" target="_blank" data-sudaclick="comment_usernickname_p">'+s+"：</a>":s+"：",n=a===this.commentMid?"":o?'<a href="'+o+'"/*tpa=https://weibo.com/u/'+o+'*/ title="'+r+'" target="_blank" data-sudaclick="comment_usernickname_p">@'+r+"：</a>":"@"+r+"：",{user:t?c.replace("@@userLink@@",t):"",lastUser:n?"回复"+c.replace("@@userLink@@",n):""}},getUserFaceTmpl:function(e){var t=e.uid;return t?'<a href="'+t+'"/*tpa=https://weibo.com/u/'+t+'*/ title="'+e.nick+'" target="_blank" data-sudaclick="comment_useravatar_p"><img src="'+e.profile_img+'"/></a>':'<img src="'+e.profile_img+'"/>'}}),xw),cmnt.DataLoader=(ox=$.createClass(),ox.include({init:function(e){this._setOpt(e),this.data=null,this.loading=!1,this.getData()},_setOpt:function(e){this.set("opt",$.extend({url:"",param:{},beforeLoad:function(){},loaded:function(e){},error:function(e,t){}},e))},getData:function(n){var a=this,i=a.get("opt"),e=i.url,t=i.param;a.loading=!0,i.beforeLoad(),$.getJsonp(e,{data:t,success:function(e){var t=e.result;0!==t.status.code||t.error?(i.error(t.status.msg,t.status.code),console.log("该评论状态异常! code:"+t.status.code+"; msg:"+t.status.msg),$.app.sima.track({error_type:"timeout error"})):(a.data=t,i.loaded(a)),a.loading=!1,n&&"function"==typeof n&&n(t.status.msg,t.status.code)}})}}),ox),cmnt.List=(Cx=function(e,t,n){if(!$.isArray(t))return"";if(!t.length)return"";var a,i,o=n.pageNum||n.latestPageNum,s=n.hotPageNum,r=[],c=n.type,l=n.data,m=0,u=0,d=0,p=0;if("latest"===c){for(d=0,a=t.length;d<a;d++){p++;var f=m<o;i=t[d],1===p&&(r.push('<div class="sina-comment-page">'),u++),r.push(cmnt.itemRender(e,i,l,n)),p===f&&(r.push("</div>"),u++,p=0),m++}u%2&&r.push("</div>")}else if("hot"===c)for(d=0,a=t.length;d<a;d++)i=t[d],m<s&&(r.push(cmnt.itemRender(e,i,l,n)),m++);else for(d=0,a=t.length;d<a;d++)i=t[d],r.push(cmnt.itemRender(e,i,l,n)),(m+1)/s==1&&(r.push("</div>"),u++);return r.join("")},Dx=$.createClass(cmnt.DataLoader),Ex=null,Dx.include({init:function(e,t,n){var a=this;a.currentDialog=null,a.listWrapper=$.byId(e);var i=$.extend({hideList:0,url:"",channel:"",newsid:"",showReply:0,group:0,hotPageNum:3,latestPageNum:3,replyShowNum:3,replyPageNum:15,replyClickMoreTimes:3,maxWordCount:200,showUserFrom:!1,loaded:function(e){},beforeLoad:function(){},error:function(e,t){}},n);i.clickMoreTimes=0,a.set("clickMoreTimes",0),a.set("countShowed",0);var o=n.encoding||cmnt.config.encoding||"utf-8",s=$.login.getInfo(),r={url:t||"//comment.sina.com.cn/page/info",config:i,param:{version:1,format:"json",channel:i.channel,newsid:i.newsid,group:i.group||i.style,compress:0,ie:o,oe:o,page:1,page_size:i.latestPageNum,t_size:i.replyShowNum,h_size:i.hotPageNum,thread:1,uid:s.sina?s.sina.uid:"unlogin_user"},listType:"all",beforeLoad:function(){a.beforeLoad(),"function"==typeof i.beforeLoad&&i.beforeLoad()},loaded:function(e){e.render(e),e.loaded(e),"function"==typeof i.loaded&&i.loaded(e)},error:function(e,t){a.error.apply(a,arguments),"function"==typeof i.error&&i.error.apply(a,arguments)}};a.firstRender=!0,a._setOpt(r),a.loading=!1,a._setDom(),a.getData()},_setDom:function(){var e=this.listWrapper,t=$.cmnt.tpls.get("list");e.innerHTML=appTemplate(t,{});var n=$.builder(e,"comment-type");this.set("dom",n.ids)},beforeLoad:function(){var e=this.get("dom"),t=this.get("opt"),n=t.config,a=t.listType;$.addClass(e.wrap,"sina-comment-list-"+a+"-loading"),n.hideList&&(e.wrap.style.display="none")},loaded:function(){var e,t,n,a=this,i=a.get("dom"),o=a.get("opt"),s=a.data,r=o.listType;if(s.news&&"N_CLOSE"===s.news.status)return a.listWrapper.style.display="none",void("body"!==(e=a.listWrapper.parentNode).tagName.toLowerCase()&&(e.style.display="none"));if(0===s.cmntlist.length&&(o.config.isBBS?a.setMore(getMsg("I006")):a.setMoreLink(getMsg("I027"))),a.firstRender&&(a.bindEvent(),cmnt.updateTime(i.wrap)),a.firstRender=!1,$.removeClass(i.wrap,"sina-comment-list-"+r+"-loading"),t="all"===r?i.wrap:i[r+"Wrap"],(n=$.byAttr(t,"action-type","dialogShow")).length)for(var c=0;c<n.length;c++)a.showDialog(n[c])},error:function(e,t){var n,a=this,i=(a.get("dom"),a.get("opt"));a.data,i.listType,a.listWrapper.style.display="none","body"!==(n=a.listWrapper.parentNode).tagName.toLowerCase()&&(n.style.display="none")},render:function(){var e=this,t=e.data,n=e.get("dom"),a=e.get("opt"),i=a.config;if(!i.hideList){var o=i.pageNum||i.latestPageNum,s=i.hotPageNum,r=a.param,c=r.newsid,l=a.listType;e.setNewsData(c,t),t.count?e.totalNum=t.count.show:e.totalNum=0;var m=t.cmntlist,u=t.hot_list;if(!m.length)return e;var d="",p="",f={data:t,pageNum:o,hotPageNum:s,showUserFrom:i.showUserFrom};if("all"===l)f.type="hot",p=Cx(c,u,f),f.type="latest",d=Cx(c,m,f),n.hotList&&(n.hotList.innerHTML=p),n.latestList.innerHTML=d,e.set("countShowed",e.get("countShowed")+m.length),e.checkClickTimes(e.get("clickMoreTimes"));else if("latest"===l){if(f.type="latest",d=Cx(c,m,f),1===r.page)n.latestList.innerHTML=d;else{var h=$.create("div");h.innerHTML=d,n.latestList.appendChild(h)}e.set("countShowed",e.get("countShowed")+m.length),e.checkClickTimes(e.get("clickMoreTimes"))}else f.type="hot",p=Cx(c,u,f),n.hotList&&(n.hotList.innerHTML=p);return e.setDataClz(l,p,d),e.loading=!1,e}e.loading=!1},showDialog:function(e){var t=$.queryToJson(e.getAttribute("action-data")),n=t.mid,a=t.newsid,i=this.get("opt").config,o=cmnt.data.get(a,"replydict",n),s=cmnt.data.get(a,"cmntlist",n);return this.Dialogs=this.Dialogs||{},this.Dialogs[n]=new cmnt.Dialog({trigger:e,listOpt:i,actionData:t,commentData:s,replyData:o})},setMoreLink:function(e,t){var n=this.get("opt"),a=n.param.group||"0",i=(t||"")+'<a class="more" target="_blank" href="default.html-channel='+n.param.channel+"/*tpa=http://comment5.news.sina.com.cn/comment/skin/default.html?channel='+n.param.channel+*/&newsid="+n.param.newsid+"&group="+a+'" data-sudaclick="comment_allcomment_p">'+e+"</a>";this.setMore(i)},setMore:function(e){var t=this.get("dom");t.latestMore&&(t.latestMore.__innerHTML__||(t.latestMore.__innerHTML__=t.latestMore.innerHTML),t.latestMore.setAttribute("action-type",""),t.latestMore.innerHTML=e)},reSetMoreLink:function(e){var t=this.get("dom");t.latestMore&&t.latestMore.__innerHTML__&&(t.latestMore.innerHTML=t.latestMore.__innerHTML__),e&&(t.latestMore.innerHTML=e),t.latestMore.setAttribute("action-type","getMore")},showFirstHidePage:function(){var e=this.get("dom"),t="sina-comment-page-hide",n=$.byClass(t,e.latestList);if(n&&0<n.length){var a=n[0],i=this.get("countShowed");if(this.set("countShowed",0),a){var o=$.byClass("item",a);this.set("countShowed",i+o.length),a.style.display="",$.removeClass(a,t),$.addClass(a,"sina-comment-page-show")}return!0}return!1},getLestNum:function(){return this.totalNum-this.get("countShowed")},getMoreLatest:function(){var e=this,t=e.get("clickMoreTimes");if(!e.showFirstHidePage()){var n=e.get("opt.param-1.page"/*tpa=http://finance.sina.com.cn/other/src/opt.param.page*/);e.setMore('<a href="javascript:;" class="more">'+getMsg("I041")+"</a>"),0<e.getLestNum()&&e.setType("latest").setPage(n+1).getData(function(){e.data&&e.data.cmntlist&&0<e.data.cmntlist.length&&e.reSetMoreLink()})}e.set("clickMoreTimes",t+1),e.checkClickTimes(t+1)},checkClickTimes:function(e){var t=this,n=t.get("opt").config,a=t.getLestNum();e<n.clickMoreTimes?t.reSetMoreLink('<a href="javascript:;" class="more">'+appTemplate(getMsg("I028"),{num:a})+"</a>"):t.setMoreLink(appTemplate(getMsg("I048"),{totalNum:t.totalNum})),a<=0&&(n.isBBS?t.setMore(getMsg("I006")):t.setMoreLink(appTemplate(getMsg("I048"),{totalNum:t.totalNum})))},bindEvent:function(){var n=this,l=n.get("dom"),m=n.get("opt");if(n.firstRender){var e=$.delegatedEvent(l.wrap);e.add("txt-toggle","click",function(e){$.cmnt.truncate.toggle(e.el,e.data.type)}),e.add("vote","click",function(e){var r=e.el,c=e.data;if("true"!==r.getAttribute("voted")){if(!r.getAttribute("posting")){r.setAttribute("posting","true"),n=r.parentNode,a=$.byAttr(n,"action-type","reply")[0],i=a.getAttribute("action-data"),$.queryToJson(i),$.cmnt.commentTip.hide();var t="onVoteSuccess";$.cmnt.vote({channel:c.channel,newsid:c.newsid,parent:c.mid,iframe:"1",callback:t})}var n,a,i;window[t]=function(e){if(e&&e.result&&e.result.status&&0==e.result.status.code){$.cmnt.voteTip.show(r,1e3),$.addClass(r,"vote-active");var t=r.title,n=getMsg("I008d"),a=0,i=$.byAttr(r,"comment-type","voteNum")[0];i&&i.innerHTML?(a=parseInt(i.innerHTML.replace(/[^\d]/g,""),10),isNaN(a)&&(a=0)):i.innerHTML=a;var o=r.innerHTML,s=a+1;r.innerHTML=o.replace($.app.splitNum(a),$.app.splitNum(s)).replace(t,n),r.title=n,r.setAttribute("voted","true"),cmnt.setVotedMid(m.param.uid,c.mid),r.setAttribute("posting","false")}else e&&e.result&&e.result.status&&106==e.result.status.code&&(cmnt.commentTip.show(l.cont,"error",getMsg("I008e"),2e3),$.addClass(r,"vote-active"),n="已"+(t=r.title),o=r.innerHTML,r.innerHTML=o.replace(t,n),r.title=n,r.setAttribute("voted","true")),r.setAttribute("posting","false")}}}),e.add("reply","click",function(e){n.toggleReply(e),$.cmnt.commentTip.hide()}),e.add("reflash","click",function(e){var t=e.data.type;n.setType(t).getData(),n.reSetMoreLink(),n.set("clickMoreTimes",0),n.set("countShowed",0)}),e.add("getMore","click",function(e){n.getMoreLatest()}),e.add("shareHover","mouseover",function(e){var t=e.el,n=e.data;setTimeout(function(){$.cmnt.shareTip.show(t,n)},100)}),e.add("shareHover","mouseout",function(e){$.cmnt.shareTip.hide(1e3)})}},toggleReply:function(e){var t,n=e.data.mid;Ex&&(e.el.innerHTML="回复",t=Ex.get("opt").parent,Ex.destroy(),Ex=null,t===n)||this.showReply(e)},showReply:function(e){var s=this,r=e.el,c=e.data,l=s.get("opt").config;Ex&&(r.innerHTML="回复",Ex.destroy(),Ex=null),r.innerHTML="收起";var t=(Ex=new cmnt.ReplyForm(r,{allNewsid:c.allNewsid,channel:c.channel,newsid:c.newsid,parent:c.mid,thread:c.thread,nick:c.nick,uid:c.uid,commented:function(e,t,n){if(!l.hideList){s.get("dom").latestList;var a,i=cmnt.data.get(c.newsid,"replydict"),o=c.thread||c.mid;i[o]=i[o]||{count:1,list:[]},i[o].list.push(n),s.Dialogs=s.Dialogs||{},(a=s.Dialogs[o])?a.listWrap.insertBefore(a.itemRender(n),a.listWrap.firstChild):(a=s.Dialogs[o]=s.showDialog(r)).page=0,"function"==typeof l.commented&&l.commented()}},autoGrow:void 0===l.autoGrow||l.autoGrow,postTip:"回复"+c.nick,floor:c.floor,pos:c.pos})).get("dom").cont;$.app.textareaUtils.insertText(t,"",0,0)},setNewsData:function(e,t){var n=cmnt.data;return n.set(e,"all",t),t.news&&n.set(e,"newsdict",[t.news]),t.newsdict&&!$.isEmptyObj(t.newsdict)&&n.set(e,"newsdict",t.newsdict),t.cmntlist&&n.set(e,"cmntlist",t.cmntlist),t.hot_list&&n.set(e,"cmntlist",t.hot_list),t.threaddict&&n.set(e,"replydict",t.threaddict),this},setDataClz:function(e,t,n){var a=this.get("dom").wrap,i="sina-comment-list-has-";t&&($.addClass(a,i+e),"all"===e&&$.addClass(a,i+"hot")),n&&($.addClass(a,i+e),"all"===e&&$.addClass(a,i+"latest"));var o=this.get("opt.config.maxWordCount");if(o!==1/0||o<=0)for(var s=$.byAttr(a,"comment-type","itemTxt"),r=0,c=s.length;r<c;r++){var l=s[r];$.cmnt.truncate.handle(l,o)}},setPage:function(e){return e<1||this.set("opt.param-1.page"/*tpa=http://finance.sina.com.cn/other/src/opt.param.page*/,e),this},setType:function(e){return e&&e.match(/^(all|hot|latest)$/)&&(this.get("opt").listType=e),this}}),Dx),cmnt.Form=(XA=cmnt.commentTip,YA=$.addEvent,ZA=$.custEvent,$A=!1,bB=$.createClass(),bB.include({init:function(e,t){var n=this;n.commenting=!1,n.commentType="normal",n._setOpt(t),n._setDom(e),n.bindEvent()},_setOpt:function(e){e.allNewsid=e.allNewsid||e.newsid,this.set("opt",$.extend({allNewsid:"",channel:"",newsid:"",parent:"",share_url:location.href.split("#")[0],video_url:"",img_url:"",encoding:cmnt.config.encoding||"utf-8",postTip:getMsg("I003"),autoGrow:!1,content:"",commented:function(){}},e))},_setDom:function(e){var t=this.get("opt");e=$.byId(e);var n=cmnt.face.get("common"),a={content:t.content,postTip:t.postTip,name:$.login.getName(),face:$.login.getFace(),commonFaces:n.faces,commonFacesBase:n.base},i=$.cmnt.tpls.get("comment");e.innerHTML=appTemplate(i,a);var o=$.builder(e,"comment-type");this.set("dom",o.ids)},bindEvent:function(){var e,t,n=this,a=n.get("dom"),i=n.get("opt"),o=a.cont,s=$._throttle(function(){var e=$.trim(o.value),t=_A(o);if(""===e||e===t)return o.focus(),void XA.show(o,"error",getMsg("I003"),3e3);if(6e3<$.byteLength(e))return o.focus(),void XA.show(o,"error","您的评论字数超出了上限3000字,请修改后再提交！",3e3);if($.login.isLogin()){if(n.commenting)return;$.login.isUidChanged()?$.login.lInSuccess(function(){n.comment()}):n.comment()}else cmnt.loginWithComment=!0,ZA.remove($,"ce_login",aB),ZA.add($,"ce_login",aB,{action:"loginWithComment",callback:function(){ZA.remove($,"ce_login",aB),!n.commenting&&cmnt.loginWithComment&&(n.comment(),cmnt.loginWithComment=!1)}}),n.login()},300,n),r=$._debounce(n.toggleSubmitBtn,300,n);a.logout&&YA(a.logout,"click",function(e){$.login.lOut()}),YA(a.submit,"click",function(e){$.hasClass(e.target,"btn-disabled")||s()}),YA(o,"keyup",function(e){r(),13===e.keyCode&&e.ctrlKey&&($.cmnt.face.hide_menu(),s())}),YA(o,"focus",r),e=o,t=r,window.ActiveXObject?e.onpropertychange=t:e.addEventListener("input",t,!1),i.autoGrow&&(n.textareaAugoGrow=new $.app.textareaAutoGrow(o,{maxHeight:72}));var c=[o];if($.placeholder(c),!$A){var l=$.cmnt.face,m=$.delegatedEvent($.byTag("body")[0]);m.add("login","click",function(e){cmnt.commentTip.hide(),$.login.lIn()}),m.add("face-toggle","click",function(e){var t=e.el;$.hasClass(t,"trigger-active")?l.hide_menu():l.show_menu(t)}),m.add("face-insert","click",function(e){var t=e.el.getAttribute("data-text");l.insert(t)}),m.add("face-close","click",function(e){l.hide_menu()}),m.add("checkbox-toggle","click",function(e){var t=e.el;$.app.simCheckbox(t)}),$A=!0}return ZA.add($,"ce_login",function(){n.setName()}),ZA.add($,"ce_preLogin",function(){n.setName()}),ZA.add($,"ce_logout",function(){n.setName()}),ZA.add($,"ce_weiboLogin",function(){n.setName()}),ZA.add($,"ce_weiboLogout",function(){n.setName()}),n},setName:function(){var e=this.get("dom");e.name&&(e.name.innerHTML=$.login.getName()),e.head&&(e.head.innerHTML=$.login.getFace())},toggleSubmitBtn:function(){var e=this.get("dom"),t=e.cont,n=e.submit,a=$.trim(t.value),i=_A(t),o="btn-disabled";""===a||a===i?$.addClass(n,o):$.removeClass(n,o)},comment:function(){var i=this;if(!i.commenting){i.commenting=!0;var o=i.get("dom"),e=i.get("opt"),s=$.trim(o.cont.value).replace(/\s/g," ");cmnt.comment({channel:e.channel,newsid:e.newsid,parent:e.parent,content:s,ie:e.encoding,oe:e.encoding,ispost:0,usertype:"pc",share_url:e.share_url,video_url:e.video_url,img_url:e.img_url},function(e){var t,n=e.result,a=Number(n.filter_code);4e3<=a||1103<=a&&a<=1106||2e3<=a&&a<=2100?1104==a||1105==a?cmnt.popup({skin:"error",type:"alert",head:null,body:getMsg("I049"),cancelText:getMsg("I047"),parentNode:o.wrap,onCancel:function(){i.commenting=!1}}).show():(t=getMsg("I001"),cmnt.commentTip.show(o.cont,"succ",t,2e3),o.cont.value="",i.commented(s),i.commenting=!1):1005===a?cmnt.popup({skin:"error",type:"confirm",head:null,body:getMsg("I045"),actionText:getMsg("I046"),cancelText:getMsg("I047"),parentNode:o.wrap,onAction:function(){i.commenting=!1,location.href="index-entry=sina_shiming&r="/*tpa=https://security.weibo.com/mobile/index?entry=sina_shiming&r=*/+encodeURIComponent(location.href.split("#")[0])},onCancel:function(){i.commenting=!1}}).show():i.commenting=!1},function(){cmnt.commentTip.show(o.cont,"error",getMsg("I042"),3e3),i.commenting=!1})}},commented:function(e){var t=this.get("opt"),n=t.allNewsid,a=$.login.getInfo(),i={newsid:n,mid:"",parent:t.parent,thread:t.thread,parent_nick:t.nick,parent_uid:t.uid,content:e,time:"",agree:0,config:$.login.getCommentConfig(),nick:a.sina.nick,uid:a.sina.uid,usertype:"pc",area:"",pos:t.pos},o=$.create("div");o.className="item item-hack clearfix",o.setAttribute("comment-type","item"),o.innerHTML=cmnt.itemInnerRender(n,i,{},[]),t.commented(e,o,i)},login:function(){$.login.isLogin()||$.login.lIn()},destroy:function(){var e=this,t=e.get("dom"),n=t.wrap;t.cont&&t.cont.blur(),n&&n.parentNode&&n.parentNode.removeChild(n),e.set("opt.parent",""),e=null}}),bB),cmnt.ReplyForm=(uC=cmnt.data,vC=$.createClass(cmnt.Form),vC.include({init:function(e,t){this.commenting=!1,this._setOpt(t),this._setDom(e),this.bindEvent()},_setDom:function(e){var t=this.get("opt"),n=(e=$.byId(e),document.createElement("div"));n.className="reply-form-wrap",n.innerHTML=appTemplate($.cmnt.tpls.get("reply"),{content:t.content,postTip:t.postTip});var a=getPar(e,"itemCont"),i=a.parentNode;"item"==i.getAttribute("comment-type")?(this.commentType="out",i.appendChild(n)):(this.commentType="in",$.insertAfter(n,a));var o=$.builder(n,"comment-type");o.ids.trigger=e,o.ids.itemCont=a,o.ids.itemWrap=i,this.set("dom",o.ids)},setArrowPos:function(){var e=this.get("dom");if(e.replyArrow&&e.trigger){var t=$.getXY(e.trigger),n=$.getXY(e.wrap),a=$.getOuterStyle(e.replyArrow,"width"),i=$.getOuterStyle(e.trigger,"width"),o=$.getOuterStyle(e.wrap,"width"),s=n[0]+o-t[0]-i/2-a/2+"px";e.replyArrow.style.right=s}},showHdTip:function(e){var t=this.get("dom").hd;t.innerHTML=e,t.style.display="",t.style.height="auto"},hideHdTip:function(){var e=this.get("dom").hd;e.style.display="none",e.style.height="0"},commented:function(e){var t=this,n=t.get("opt"),a=n.allNewsid,i=n.parent,o=(n.thread,$.login.getInfo()),s=(uC.get(a,"cmntlist",i),uC.get(a,"replydict",i));$.isArray(s)||(s=[]);var r,c={newsid:a,mid:"",parent:n.parent,thread:n.thread,parent_nick:n.nick,parent_uid:n.uid,content:e,time:"",agree:0,config:$.login.getCommentConfig(),nick:o.sina.nick,uid:o.sina.uid,usertype:"pc",area:""},l=$.create("div");if(l.className="item item-hack clearfix",l.setAttribute("comment-type","item"),l.innerHTML=cmnt.itemInnerRender(a,c,{},s),"dialog"===n.pos){var m=s[n.floor-1],u="";typeof m!==$.C.U&&(u=cmnt.getUserLnk(m,"@")),(r=$.create("div")).className="item item-hack clearfix",r.setAttribute("comment-type","item"),r.innerHTML=cmnt.dialogItemInnerRender(a,c,"new",u)}n.commented(e,l,c),setTimeout(function(){t.destroy(),t.commenting=!1},2e3)}}),vC),cmnt.FormList=(iD=$.createClass(),iD.include({init:function(e,t,n,a){this._setOpt(t,n,a),this._setDom(e),this.render()},_setOpt:function(n,t,e){var a=this;a.formOpt=$.extend({},n),a.listOpt=$.extend({},t),a.opt=$.extend({isBBS:0,hideList:0,hideComment:!1},e),a.formOpt.commented=function(e,t){a.commented(e,t),"function"==typeof n.commented&&n.commented(e,t)},a.listOpt.loaded=function(e){a.loaded(e),"function"==typeof t.loaded&&t.loaded(e)}},_setDom:function(e){e=$.byId(e),$.addClass(e,"sina-comment-wrap");var t=$.cmnt.tpls.get("formList");e.innerHTML=appTemplate(t,{});var n=$.builder(e,"comment-type");this.set("domList",n.list),this.set("dom",n.ids)},render:function(){var e=this,t=e.get("domList"),n=e.get("dom"),a=t.form;if(e.commentForms=[],e.commentList=null,e.opt.hideList||(e.commentList=new cmnt.List(n.list,e.listOpt.url,e.listOpt)),e.opt.hideComment){var i=$.byClass("page-tools");0<i.length&&($.byAttr(i[0],"node-type","comment")[0].style.display="none");for(var o=a.length-1;0<=o;o--)a[o].style.display="none"}if(a&&!e.opt.hideComment)for(o=a.length-1;0<=o;o--)e.commentForms.push(new cmnt.Form(a[o],e.formOpt))},setCount:function(){var e=this,t=cmnt.data.get(e.formOpt.allNewsid||e.formOpt.newsid,"all"),n=t.news,a="default-1.html"/*tpa=http://comment5.news.sina.com.cn/comment/skin/default.html*/,i='<span class="sep">|</span>',o={comment:"",person:"",post:""},s=getMsg("I031")+i+getMsg("I032");if(t&&t.count&&(o.comment=$.app.splitNum(t.count.show),o.person=$.app.splitNum(t.count.total)),e.opt.isBBS){if(!e.listOpt.group&&t.grouplist&&0!==t.grouplist.length){var r=t.grouplist[0];s+=i+getMsg("I033"),o.post='<a href="'+a+"?channel="+r.news.channel+"&newsid="+r.news.newsid+'&group=1">'+$.app.splitNum(r.count.total)+"</a>"}}else{var c=a+"?channel="+n.channel+"&newsid="+n.newsid;1===e.listOpt.group&&(c+="&style=1"),o.comment='<a href="'+c+'" data-sudaclick="comment_sum_p" target="_blank">'+o.comment+"</a>",o.person='<a href="'+c+'" data-sudaclick="comment_participatesum_p" target="_blank">'+o.person+"</a>"}for(var l,m=appTemplate(s,o),u=e.commentForms,d=u.length-1;0<=d;d--)(l=u[d].get("dom")).count&&(l.count.innerHTML=m)},loaded:function(e){this.setCount()},commented:function(e,t){var n=this.opt;if(this.commentList&&!n.hideList){var a=this.commentList,i=a.get("dom.latestList"),o=a.get("opt.config.hideList"),s=!0;void 0!==n.scrollToLatest&&(s=n.scrollToLatest),typeof o!==UNDEFINED&&1!==o&&(cmnt.insertList(i,t,s),a.setDataClz("all",a.data.hot_list&&1<a.data.hot_list.length,1))}}}),iD),cmnt})}(window);